<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>歪脖子鹅的博客</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2017-09-06T16:30:45.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>歪脖子鹅</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>两种方法实现收藏或者点赞功能</title>
    <link href="http://yoursite.com/2017/09/07/%E4%B8%A4%E7%A7%8D%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E6%94%B6%E8%97%8F%E6%88%96%E8%80%85%E7%82%B9%E8%B5%9E%E5%8A%9F%E8%83%BD/"/>
    <id>http://yoursite.com/2017/09/07/两种方法实现收藏或者点赞功能/</id>
    <published>2017-09-06T16:30:24.000Z</published>
    <updated>2017-09-06T16:30:45.000Z</updated>
    
    <content type="html"><![CDATA[<p>收藏功能与点赞功能的实作十分类似，本文以购物车教程实作收藏功能为例。</p><h3 id="方法一："><a href="#方法一：" class="headerlink" title="方法一："></a>方法一：</h3><h5 id="step1"><a href="#step1" class="headerlink" title="step1"></a>step1</h5><p>一个用户可以收藏多个商品，一个商品可以被收藏很多次，因此这是多对多的关系。因此需要新增一个model，来当做product与suer的桥梁。<code>$ rails g model collect user_id:integer product_id:integer</code>,然后执行 <code>rake db:migrate</code>，然后为collect、user与product这三个model加上关联。</p><figure class="highlight ruby"><figcaption><span>app/models/collect.rb</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">   + belongs_to <span class="symbol">:user</span></div><div class="line">   + belongs_to <span class="symbol">:product</span></div><div class="line"><span class="string">``</span><span class="string">`   </span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">`</span><span class="string">``</span> ruby app/models/product.rb</div><div class="line">   + has_many <span class="symbol">:collects</span></div><div class="line">   + has_many <span class="symbol">:collected_users</span>, <span class="symbol">through:</span> <span class="symbol">:collects</span>, <span class="symbol">source:</span> <span class="symbol">:user</span></div></pre></td></tr></table></figure><figure class="highlight ruby"><figcaption><span>app/models/user.rb</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">   + has_many <span class="symbol">:collects</span></div><div class="line">   + has_many <span class="symbol">:collected_products</span>, <span class="symbol">through:</span> <span class="symbol">:collects</span>, <span class="symbol">source:</span> <span class="symbol">:product</span></div><div class="line"></div><div class="line">   <span class="comment">#加上是否收藏商品的判定</span></div><div class="line">   + <span class="function"><span class="keyword">def</span> <span class="title">is_collect_of?</span><span class="params">(product)</span></span></div><div class="line">   +  collected_products.<span class="keyword">include</span>?(product)</div><div class="line">   + <span class="keyword">end</span></div><div class="line"><span class="string">``</span><span class="string">`    </span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">#### step2</span></div><div class="line"><span class="string">首先修改路由信息：</span></div><div class="line"><span class="string">`</span><span class="string">``</span> ruby config/routes.rb</div><div class="line">  + resources <span class="symbol">:product</span> <span class="keyword">do</span></div><div class="line">   +  member <span class="keyword">do</span></div><div class="line">   +    post <span class="symbol">:collect</span></div><div class="line">   +    post <span class="symbol">:uncollect</span></div><div class="line">   + <span class="keyword">end</span></div><div class="line"> +  <span class="keyword">end</span></div></pre></td></tr></table></figure><p>在controller里加上对应的method，</p><figure class="highlight ruby"><figcaption><span>app/controllers/product_controllers.rb</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">+ <span class="function"><span class="keyword">def</span><span class="title">collect</span></span></div><div class="line"> + @product = Product.find(params[<span class="symbol">:id</span>])</div><div class="line"> + current_user.collected_products &lt;&lt; @product</div><div class="line"> + flash[<span class="symbol">:notice</span>] = <span class="string">"成功收藏商品"</span></div><div class="line"> + redirect_to <span class="symbol">:back</span></div><div class="line">+ <span class="keyword">end</span></div><div class="line"></div><div class="line">+ <span class="function"><span class="keyword">def</span> <span class="title">uncollect</span></span></div><div class="line"> + @product = Product.find(params[<span class="symbol">:id</span>])</div><div class="line"> + currrent_user.collected_products.delete(@product)</div><div class="line"> + flash[<span class="symbol">:warning</span>] = <span class="string">"您已取消收藏该商品"</span></div><div class="line"> + redirect_to <span class="symbol">:back</span></div><div class="line">+ <span class="keyword">end</span></div></pre></td></tr></table></figure><h4 id="step3"><a href="#step3" class="headerlink" title="step3"></a>step3</h4><p>在views中的相应位置加入收藏的显示</p><figure class="highlight ruby"><figcaption><span>app/views/products/show.html.erb</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">+ &lt;% <span class="keyword">if</span> current_user &amp;&amp; current_user.is_collect_of?(@product) %&gt;</div><div class="line">+  &lt;%= link_to(“取消收藏”, uncollect_product_path(@product), <span class="symbol">:method</span> =&gt; <span class="symbol">:post</span>, <span class="class"><span class="keyword">class</span>: "<span class="title">btn</span> <span class="title">btn</span>-<span class="title">danger</span> <span class="title">btn</span>-<span class="title">lg</span>" )%&gt;</span></div><div class="line">+ &lt;% <span class="keyword">else</span> %&gt;</div><div class="line">+  &lt;%= link_to(<span class="string">"收藏“, collect_product_path(@product), :method =&gt; :post, class: "</span>btn btn-danger btn-lg<span class="string">" )%&gt;</span></div><div class="line"><span class="string">+ &lt;% end %&gt;</span></div></pre></td></tr></table></figure><h3 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h3><h4 id="step1-1"><a href="#step1-1" class="headerlink" title="step1"></a>step1</h4><p>同样，终端执行 <code>rails g model colloect</code>, 编辑 <code>db/migrate/XXXXXXXX_create_collects.rb</code><br><figure class="highlight ruby"><figcaption><span>db/migrate/XXXXXXXX_create_collects.rb    </span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">CreateCollects</span> &lt; ActiveRecord::Migration[5.0]</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">change</span></span></div><div class="line">      create_table <span class="symbol">:collects</span> <span class="keyword">do</span> <span class="params">|t|</span></div><div class="line">+       t.integer <span class="symbol">:user_id</span>, <span class="symbol">:index</span> =&gt; <span class="literal">true</span></div><div class="line">+       t.integer <span class="symbol">:product_id</span>, <span class="symbol">:index</span> =&gt; <span class="literal">true</span></div><div class="line">        t.timestamps</div><div class="line">      <span class="keyword">end</span></div><div class="line">    <span class="keyword">end</span></div><div class="line">  <span class="keyword">end</span></div></pre></td></tr></table></figure></p><p>之后执行 <code>rake db:migrate</code></p><p>编辑<code>app/models/collect.rb</code>,加上关联<br><figure class="highlight ruby"><figcaption><span>app/models/collect.rb</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">+ belongs_to <span class="symbol">:user</span></div><div class="line">+ belongs_to <span class="symbol">:product</span></div></pre></td></tr></table></figure></p><p>编辑 <code>app/models/product.rb</code>,加上关联<br><figure class="highlight ruby"><figcaption><span>app/models/product.rb</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">  + has_many <span class="symbol">:collects</span>, <span class="symbol">:dependent</span> =&gt; <span class="symbol">:destroy</span></div><div class="line">  + had_many <span class="symbol">:collected_users</span>, <span class="symbol">through:</span> <span class="symbol">:collects</span>, <span class="symbol">source:</span> <span class="symbol">:user</span></div><div class="line"></div><div class="line">  + <span class="function"><span class="keyword">def</span> <span class="title">find_collect</span><span class="params">(user)</span></span></div><div class="line">   +  <span class="keyword">self</span>.collects.where( <span class="symbol">:user_id</span> =&gt; user.id).first</div><div class="line">  + <span class="keyword">end</span></div><div class="line"><span class="string">``</span><span class="string">`  </span></div><div class="line"><span class="string"></span></div><div class="line"><span class="string">编辑 `</span>app/model/user.rb<span class="string">`,加上关联</span></div><div class="line"><span class="string">`</span><span class="string">``</span> ruby app/models/user.rb</div><div class="line">  +  has_many <span class="symbol">:collects</span>, <span class="symbol">:dependent</span> =&gt; <span class="symbol">:destroy</span></div><div class="line">  +  has_many <span class="symbol">:collected_products</span>, <span class="symbol">through:</span> <span class="symbol">:collects</span>,  <span class="symbol">source:</span> <span class="symbol">:product</span></div></pre></td></tr></table></figure></p><h4 id="step2"><a href="#step2" class="headerlink" title="step2"></a>step2</h4><p>编辑路由信息<br><figure class="highlight ruby"><figcaption><span>config/routes.rb</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">+ resource <span class="symbol">:products</span> <span class="keyword">do</span></div><div class="line">+   member <span class="keyword">do</span></div><div class="line">+     post <span class="symbol">:collect</span></div><div class="line">+     post <span class="symbol">:uncollect</span></div><div class="line">+   <span class="keyword">end</span></div><div class="line">+ <span class="keyword">end</span></div></pre></td></tr></table></figure></p><p>在controller中添加：<br><figure class="highlight ruby"><figcaption><span>app/controllers/product_controller.rb</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">+ <span class="function"><span class="keyword">def</span> <span class="title">collect</span></span></div><div class="line">  + @product = Product.find(params[<span class="symbol">:id</span>])    </div><div class="line">  + <span class="keyword">unless</span> @product.find_collect(cuurent_user)</div><div class="line">  +   Collect.create( <span class="symbol">:user</span> =&gt; current_user, <span class="symbol">:product</span> =&gt; @product)</div><div class="line">  + flash[<span class="symbol">:notice</span>] = <span class="string">"您已成功收藏该商品"</span></div><div class="line">  + <span class="keyword">end</span></div><div class="line">  + redirect_to <span class="symbol">:back</span></div><div class="line">+ <span class="keyword">end</span></div><div class="line"></div><div class="line">+ <span class="function"><span class="keyword">def</span> <span class="title">uncollect</span></span></div><div class="line">   + @product = Product.find(params[<span class="symbol">:id</span>])</div><div class="line">   + collect = @product.find_collect(current_user)</div><div class="line">   + collect.destroy</div><div class="line">   + flash[<span class="symbol">:warning</span>] = <span class="string">"您已取消收藏该商品"</span></div><div class="line">   + redirect_to <span class="symbol">:back</span></div><div class="line">+ <span class="keyword">end</span></div></pre></td></tr></table></figure></p><h3 id="Step3"><a href="#Step3" class="headerlink" title="Step3"></a>Step3</h3><p>最后一歩，就是要在 <code>app/views/products/show.html.erb</code>中加上收藏的按钮</p><figure class="highlight ruby"><figcaption><span>app/views/products/show.html.erb</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">……略</div><div class="line"> + &lt;% <span class="keyword">if</span> current_user %&gt;</div><div class="line"> +   &lt;% <span class="keyword">if</span> @product.find_collect(current_user)%&gt;</div><div class="line"> +     &lt;% =link_to(<span class="string">"取消收藏"</span>, uncollect_product_path(@product), <span class="symbol">:method</span> =&gt; <span class="symbol">:post</span>, <span class="class"><span class="keyword">class</span>: "<span class="title">btn</span> <span class="title">btn</span>-<span class="title">danger</span> <span class="title">btn</span>-<span class="title">lg</span>")%&gt;</span></div><div class="line"> +   &lt;% <span class="keyword">else</span> %&gt;</div><div class="line"> +     &lt;%= link_to(<span class="string">"收藏"</span>, collect_product_path(@product), <span class="symbol">:method</span> =&gt; <span class="symbol">:post</span>, <span class="class"><span class="keyword">class</span>: "<span class="title">btn</span> <span class="title">btn</span>-<span class="title">primary</span> <span class="title">btn</span>-<span class="title">lg</span>")%&gt;</span></div><div class="line"> +   &lt;% <span class="keyword">end</span> %&gt;</div><div class="line"> + &lt;% <span class="keyword">end</span> %&gt;</div><div class="line">……略</div></pre></td></tr></table></figure><h3 id="成果展示"><a href="#成果展示" class="headerlink" title="成果展示"></a>成果展示</h3><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1fgv9zutcveg30rr0i9jwo.gif" alt=""></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;收藏功能与点赞功能的实作十分类似，本文以购物车教程实作收藏功能为例。&lt;/p&gt;
&lt;h3 id=&quot;方法一：&quot;&gt;&lt;a href=&quot;#方法一：&quot; class=&quot;headerlink&quot; title=&quot;方法一：&quot;&gt;&lt;/a&gt;方法一：&lt;/h3&gt;&lt;h5 id=&quot;step1&quot;&gt;&lt;a href=
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>利用ransack做搜索功能</title>
    <link href="http://yoursite.com/2017/09/07/%E5%88%A9%E7%94%A8ransack%E5%81%9A%E6%90%9C%E7%B4%A2%E5%8A%9F%E8%83%BD/"/>
    <id>http://yoursite.com/2017/09/07/利用ransack做搜索功能/</id>
    <published>2017-09-06T16:27:42.000Z</published>
    <updated>2017-09-06T16:29:27.000Z</updated>
    
    <content type="html"><![CDATA[<p>本篇教程基于自己的一个小项目，用户可以搜索网站上其他用户发表过的文章。</p><h3 id="第一歩："><a href="#第一歩：" class="headerlink" title="第一歩："></a>第一歩：</h3><p><strong>安装gem ransack</strong></p><blockquote><p>ransack会用数据库的LIKE语法来做搜寻，虽然比较方便，但它会依次检查资料是否符合，而不会使用数据库的索引。如果数据比较庞大的话，利用ransack将不会是一个好的选择。这时候我们就可以安装专门的全文搜索引擎，例如<a href="https://www.elastic.co/cn/" target="_blank" rel="external">Elasticsearch</a></p></blockquote><figure class="highlight ruby"><figcaption><span>Gemfile</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">+  gem <span class="string">'ransack'</span></div></pre></td></tr></table></figure><p><code>$ bundle</code>，重启 rails s</p><h3 id="第二歩"><a href="#第二歩" class="headerlink" title="第二歩"></a>第二歩</h3><p><strong>controller与config的设定</strong><br>1、设置路由<br><figure class="highlight ruby"><figcaption><span>config/routes.rb</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">Rails.application.routes.draw <span class="keyword">do</span></div><div class="line">  devise_for <span class="symbol">:users</span></div><div class="line">  resources <span class="symbol">:posts</span> <span class="keyword">do</span></div><div class="line"> +   collection <span class="keyword">do</span>    <span class="comment">#我们会搜索出所有符合关键字的文章，结果为复数，因此用collection，而不是member</span></div><div class="line"> +     get <span class="symbol">:search</span></div><div class="line"> +   <span class="keyword">end</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span>  </div><div class="line"><span class="string">``</span><span class="string">`  </span></div><div class="line"><span class="string">2、 设置controller</span></div><div class="line"><span class="string">主要设置通过哪些关键词进行搜索。</span></div><div class="line"><span class="string">`</span><span class="string">``</span>ruby app/controllers/posts_controller.rb</div><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">PostsController</span> &lt; ApplicationController</span></div><div class="line">    before_action <span class="symbol">:validate_search_key</span>, <span class="symbol">only:</span> [<span class="symbol">:search</span>]</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">search</span></span></div><div class="line">      <span class="keyword">if</span> @query_string.present?</div><div class="line">        @posts = search_params    <span class="comment">#搜索post的关键词</span></div><div class="line">      <span class="keyword">end</span></div><div class="line">    <span class="keyword">end</span></div><div class="line"></div><div class="line">    protected  <span class="comment"># 放在最后</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">validate_search_key</span></span></div><div class="line">       <span class="comment"># gsub 是Ruby中正则表达式的方法，它会切换所有匹配到的部分</span></div><div class="line">       @query_string = params[<span class="symbol">:q</span>].gsub(<span class="regexp">/\\|\'|\/|\?/</span>, <span class="string">""</span>)<span class="keyword">if</span> params[<span class="symbol">:q</span>].present?  </div><div class="line">    <span class="keyword">end</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">search_params</span>      </span></div><div class="line">      Post.ransack(&#123;<span class="symbol">:title_or_content_cont</span> =&gt; @query_string&#125;).result(<span class="symbol">distinct:</span> <span class="literal">true</span>)</div><div class="line">      <span class="comment">#title与content是post的两个栏位，而我们的关键词出自这里</span></div><div class="line">      <span class="keyword">end</span></div><div class="line">  <span class="keyword">end</span></div></pre></td></tr></table></figure></p><h3 id="第三歩"><a href="#第三歩" class="headerlink" title="第三歩"></a>第三歩</h3><p><strong>views的设定</strong><br>1、导航栏的显示<br><figure class="highlight ruby"><figcaption><span>app/views/common/_navbar.html.erb</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"> &lt;div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1"&gt;</div><div class="line"> +  &lt;ul class="nav navbar-nav"&gt;</div><div class="line"> +    &lt;li&gt;</div><div class="line"> +        &lt;div class="form-group form-inline search-bar"&gt;</div><div class="line"> +          &lt;%= render <span class="symbol">:partial</span> =&gt; <span class="string">"posts/search_bar"</span>%&gt;</div><div class="line"> +       &lt;<span class="regexp">/div&gt;</span></div><div class="line"><span class="regexp"> +      &lt;/li</span>&gt;</div><div class="line"> +  &lt;<span class="regexp">/ul&gt;</span></div><div class="line"><span class="regexp"> …… 略</span></div><div class="line"><span class="regexp">&lt;/div</span>&gt;</div></pre></td></tr></table></figure></p><p>执行<code>$ touch app/views/posts/_search_bar.html.erb</code>,并编辑<br><figure class="highlight ruby"><figcaption><span>app/views/posts/_search_bar.html.erb</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"> &lt;div class="row"&gt;</div><div class="line">  &lt;div class="col-sm-9 col-lg-8 col-lg-offset-2"&gt;</div><div class="line">    &lt;%= form_tag search_posts_path, <span class="symbol">:class</span> =&gt; <span class="string">"posts-search-form"</span>, <span class="symbol">:method</span> =&gt; <span class="symbol">:get</span> <span class="keyword">do</span> %&gt;</div><div class="line">      &lt;div class="input-group"&gt;</div><div class="line">        &lt;input type="text" class="form-control search-bar-input" name="q" value="&lt;%= params[:q] %&gt;" placeholder="关键词"&gt;</div><div class="line">        &lt;span class="input-group-btn"&gt;</div><div class="line">          &lt;button type="submit" class="btn btn-default search-bar-submit"&gt;</div><div class="line">            &lt;span class="glyphicon glyphicon-search"&gt;&lt;/span&gt;</div><div class="line">          &lt;<span class="regexp">/button&gt;</span></div><div class="line"><span class="regexp">        &lt;/span</span>&gt;</div><div class="line">      &lt;<span class="regexp">/div&gt;</span></div><div class="line"><span class="regexp">    &lt;% end %&gt;</span></div><div class="line"><span class="regexp">  &lt;/div</span>&gt;</div><div class="line">&lt;<span class="regexp">/div&gt;</span></div></pre></td></tr></table></figure></p><p><strong>2.搜索反馈页面</strong><br>新增 <code>app/views/posts/search.html.erb</code><br><figure class="highlight ruby"><figcaption><span>app/views/posts/search.html.erb</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">&lt;div class="minHeight1000 bg-gray"&gt;</div><div class="line">  &lt;div class="search-page w1200 pt30 bc"&gt;</div><div class="line">      &lt;% <span class="keyword">if</span> @posts.present? %&gt;</div><div class="line">        &lt;h5 class="collection search-count"&gt;已为您找到&lt;%= @posts.count %&gt;篇相关文章&lt;/h5&gt;</div><div class="line">      &lt;% <span class="keyword">else</span> %&gt;</div><div class="line">        &lt;p class="tc mt100"&gt;未搜索到任何文章，要不换个关键词试试？&lt;/p&gt;</div><div class="line">      &lt;% <span class="keyword">end</span> %&gt;</div><div class="line">  &lt;<span class="regexp">/div&gt;</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">  &lt;div class="container"&gt;</span></div><div class="line"><span class="regexp">  &lt;% @posts.each do |post| %&gt;</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">    &lt;div class="panel panel-default"&gt;</span></div><div class="line"><span class="regexp">      &lt;div class="panel-body"&gt;</span></div><div class="line"><span class="regexp">        &lt;%= post.title %&gt;</span></div><div class="line"><span class="regexp">        &lt;br/</span>&gt;</div><div class="line">        &lt;br/&gt;</div><div class="line">        &lt;span id="psot-thumbsup-&lt;%= post.id%&gt;" class=" label label-success"&gt;&lt;%= post.likes.count%&gt;👍&lt;/span&gt;</div><div class="line">        &lt;div class="text-right"&gt;</div><div class="line"></div><div class="line">          &lt;% <span class="keyword">if</span> !current_user.is_collect_of?(post) %&gt;</div><div class="line">            &lt;%= link_to(<span class="string">"收藏"</span>, collect_post_path(post), <span class="symbol">method:</span> <span class="symbol">:post</span>, <span class="class"><span class="keyword">class</span>: "<span class="title">btn</span> <span class="title">btn</span>-<span class="title">sm</span>") %&gt;</span></div><div class="line">          &lt;% <span class="keyword">else</span> %&gt;</div><div class="line">            &lt;%= link_to(<span class="string">"取消收藏"</span>, uncollect_post_path(post), <span class="symbol">method:</span> <span class="symbol">:post</span>, <span class="class"><span class="keyword">class</span>: "<span class="title">btn</span> <span class="title">btn</span>-<span class="title">sm</span>") %&gt;</span></div><div class="line">          &lt;% <span class="keyword">end</span> %&gt;</div><div class="line">        &lt;<span class="regexp">/div&gt;</span></div><div class="line"><span class="regexp">      &lt;/div</span>&gt;</div><div class="line"></div><div class="line">    &lt;<span class="regexp">/div&gt;</span></div><div class="line"><span class="regexp"></span></div><div class="line"><span class="regexp">  &lt;% end %&gt;</span></div><div class="line"><span class="regexp">  &lt;/div</span>&gt;</div><div class="line">&lt;<span class="regexp">/div&gt;</span></div></pre></td></tr></table></figure></p><p>效果图<br>   <img src="https://ws3.sinaimg.cn/large/006tNc79gy1fhcsoezlm4j31bw0g9gmw.jpg" alt=""></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;本篇教程基于自己的一个小项目，用户可以搜索网站上其他用户发表过的文章。&lt;/p&gt;
&lt;h3 id=&quot;第一歩：&quot;&gt;&lt;a href=&quot;#第一歩：&quot; class=&quot;headerlink&quot; title=&quot;第一歩：&quot;&gt;&lt;/a&gt;第一歩：&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;安装gem ransa
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>my_first_post</title>
    <link href="http://yoursite.com/2017/09/06/my-first-post/"/>
    <id>http://yoursite.com/2017/09/06/my-first-post/</id>
    <published>2017-09-06T09:42:31.000Z</published>
    <updated>2017-09-06T09:42:46.000Z</updated>
    
    <content type="html"><![CDATA[<p>歪脖子鹅</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;歪脖子鹅&lt;/p&gt;

      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://yoursite.com/2017/09/06/hello-world/"/>
    <id>http://yoursite.com/2017/09/06/hello-world/</id>
    <published>2017-09-06T09:33:31.000Z</published>
    <updated>2017-09-06T09:33:31.000Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
    
  </entry>
  
</feed>
