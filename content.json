{"meta":{"title":"jonathan-fei.pro","subtitle":null,"description":"Stay hungry. Stay foolish.","author":"jonathan-fei","url":"http://yoursite.com"},"pages":[{"title":"tags","date":"2017-12-30T12:23:01.000Z","updated":"2017-12-30T12:23:14.179Z","comments":true,"path":"tags/index.html","permalink":"http://yoursite.com/tags/index.html","excerpt":"","text":""},{"title":"categories","date":"2017-12-30T12:21:04.000Z","updated":"2017-12-30T12:21:51.399Z","comments":true,"path":"categories/index.html","permalink":"http://yoursite.com/categories/index.html","excerpt":"","text":""}],"posts":[{"title":"SQLåŸºç¡€","slug":"SQLåŸºç¡€","date":"2018-01-04T07:09:29.000Z","updated":"2018-01-04T07:36:02.520Z","comments":true,"path":"2018/01/04/SQLåŸºç¡€/","link":"","permalink":"http://yoursite.com/2018/01/04/SQLåŸºç¡€/","excerpt":"","text":"SQLï¼ŒStructure Query Languageï¼Œç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼Œæ˜¯å…³ç³»å‹æ•°æ®åº“çš„åº”ç”¨è¯­è¨€ã€‚ ä¸€ã€åˆ†ç±» DDLï¼ˆData Defintion Language ï¼‰è¯­å¥ï¼šæ•°æ®å®šä¹‰è¯­è¨€ï¼Œå®šä¹‰äº†ä¸åŒçš„æ•°æ®æ®µã€æ•°æ®åº“ã€è¡¨ã€åˆ—ã€ç´¢å¼•ç­‰æ•°æ®åº“å¯¹è±¡ï¼Œå¸¸ç”¨çš„è¯­å¥çš„å…³é”®å­—åŒ…æ‹¬ createã€dropã€alterç­‰ã€‚ DMLï¼ˆData Manipulation Languageï¼‰è¯­å¥ï¼šæ•°æ®æ“çºµè¯­å¥ï¼Œç”¨äºå¢åˆ æ”¹æŸ¥æ•°æ®åº“è®°å½•ï¼Œå¹¶æ£€æŸ¥æ•°æ®çš„å®Œæ•´æ€§ã€‚å…³é”®è¯ï¼š insertã€deleteã€updateã€selectã€‚ DCLï¼ˆData Control Languageï¼‰è¯­å¥ï¼šæ•°æ®æ§åˆ¶è¯­å¥ï¼Œç”¨äºæ§åˆ¶ä¸åŒæ•°æ®æ®µç›´æ¥çš„è®¸å¯å’Œè®¿é—®çº§åˆ«çš„è®¸å¯ã€‚è¿™äº›è¯­å¥å®šä¹‰äº†æ•°æ®åº“ã€è¡¨ã€å­—æ®µã€ç”¨æˆ·çš„è®¿é—®æƒé™å’Œå®‰å…¨çº§åˆ«ã€‚å…³é”®è¯ï¼šgrantã€revokeã€‚ äºŒã€DDLè¯­å¥ DDLè¯­å¥ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ç”±æ•°æ®åº“ç®¡ç†å‘˜ï¼ˆDBAï¼‰ä½¿ç”¨ï¼Œä¸DMLçš„æœ€å¤§åŒºåˆ«æ˜¯DMLåªå¯¹è¡¨å†…æ•°æ®è¿›è¡Œæ“ä½œï¼Œè€Œä¸è®¾è®¡è¡¨çš„å®šä¹‰ã€ç»“æ„å’Œä¿®æ”¹ã€‚ä»¥ä¸‹å‘½ä»¤å‡ä¸ºåœ¨æŒ‡å®šæ•°æ®åº“å†…æ“ä½œï¼Œå› æ­¤ä¸ç”¨æŒ‡æ˜æ˜¯åœ¨å“ªé‡Œæ•°æ®åº“é‡Œæ–°å¢ç­‰ï¼Œè‹¥æ²¡æœ‰æŒ‡å®šï¼Œåˆ™éœ€è¦åŠ ä¸Šæ•°æ®åº“çš„åç§°ã€‚ åˆ›å»ºæ•°æ®åº“ - CREATE DATABASE dbname; ï¼ˆCREATE DATABASE ä¹Ÿå¯å°å†™ ï¼‰ åˆ é™¤æ•°æ®åº“ - DROP DATABASE dbnameï¼› åˆ›å»ºè¡¨ - 1234CREATE TABLE tablenameï¼ˆ column_name_1 column_type_1_constraints, column_name_2 column_type_2_constraints, ... column_name_n column_type_n_constraintsï¼‰ æŸ¥çœ‹è¡¨ç»“æ„ â€”â€” DESC tablename æ›´å…¨é¢åœ°æŸ¥çœ‹è¡¨å®šä¹‰ â€”â€” show create table tablename \\G; è¿™æ¡å‘½ä»¤å¯ä»¥çœ‹åˆ°åˆ›å»ºè¡¨çš„SQLè¯­å¥,å…¶ä¸­â€œ\\Gâ€çš„æ„æ€æ˜¯ä½¿å¾—è®°å½•èƒ½å¤ŸæŒ‰ç…§å­—æ®µç«–å‘æ’åˆ—ï¼Œä¹Ÿå°±æ˜¯æ”¹å˜æˆ‘ä»¬çœ‹åˆ°çš„æ ¼å¼ã€‚ åˆ é™¤è¡¨ - DROP TABLE tablename ä¿®æ”¹è¡¨- ä¿®æ”¹è¡¨ç±»å‹ï¼ˆå­—æ®µçš„ç±»å‹ï¼‰1ALTER TABLE tablename MODIFY[COLUMN] column_definition [FIRST|AFTER col_name] ä¾‹å¦‚ï¼Œåœ¨mysqlç¯å¢ƒä¸‹æ‰§è¡Œï¼Œalter table emp modify ename varchar(20)ã€‚ å¢åŠ è¡¨å­—æ®µ 1ALTER TABLE table_name ADD[COLUMN] column_definition [FIRST|AFTER col_name] ä¾‹å¦‚ï¼Œ alter table emp add column age int(3); åˆ é™¤è¡¨å­—æ®µ -ALTER TABLE table_name DROP [COLUMN] col_name;ä¾‹å¦‚ï¼Œ alter table emp drop column ageï¼› å­—æ®µæ”¹å -1ALTER TABLE table_name CHANGE[COLUMN] old_col_name column_definition[FIRST|AFTER column_name] ä¾‹å¦‚ï¼Œalter table emp change age age1 int(4);PS: changä¸modifyéƒ½å¯ä»¥ä¿®æ”¹åˆ—ï¼Œä½†æ˜¯changeå³å¯ä»¥ä¿®æ”¹åˆ—çš„åç§°ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹åˆ—çš„ç±»å‹ï¼Œè€Œmodifyåªèƒ½ä¿®æ”¹åˆ—çš„ç±»å‹ã€‚ ä¿®æ”¹å­—æ®µçš„é¡ºåº -ä¾‹å¦‚ï¼Œalter table emp add age int(2) after name; alter table emp change age age1 int(4) first; ä¿®æ”¹è¡¨å -ALTER TABLE table_name RENAME [TO] new_tablename,ä¾‹å¦‚ï¼Œ alter table emp rename emp1; ä¸‰ã€DML è¯­å¥DMLè¯­å¥æ˜¯æŒ‡å¯¹æ•°æ®åº“ä¸­è¡¨è®°å½•çš„æ“ä½œï¼Œä¸»è¦åŒ…æ‹¬è¡¨è®°å½•çš„æ’å…¥ï¼ˆinsertï¼‰ã€æ›´æ–°ï¼ˆupdateï¼‰ã€åˆ é™¤ï¼ˆdeleteï¼‰å’ŒæŸ¥è¯¢ï¼ˆselectï¼‰ï¼Œæ˜¯å¼€å‘äººå‘˜æ—¥å¸¸ä½¿ç”¨æœ€é¢‘ç¹çš„æ“ä½œã€‚ 1- æ’å…¥è®°å½•æ’å…¥å•æ¡è®°å½•ï¼šINSERT INTO table_name(field1, field2, â€¦ fieldn) VALUES(value1, value2, â€¦valuen);ä¾‹å¦‚ï¼Œinsert into emp(ename, hire,sal,deptno) values(â€˜zzx1â€™, â€˜2000-1-1â€™, â€˜2000â€™,1); ä¹Ÿå¯ä»¥ä¸ç”¨æŒ‡å®šå­—æ®µåç§°ï¼Œä½†æ˜¯éœ€è¦valuesåé¢çš„å¾ªåºä¸å­—æ®µçš„é¡ºåºä¸€è‡´ã€‚ æ’å…¥å¤šæ¡è®°å½•ï¼šINSERT INTO tablename (field1, field2, â€¦ fieldn)VALUES(record1_value1, record2_value2, â€¦ record1_valuen),(record2_value1, record2_value2, â€¦ record2_valuen),â€¦(recordn_value1, recordn_value2, â€¦ recordn_valuen);ä¾‹å¦‚insert into dept VALUES(5, â€œ35â€),(3,â€232â€); 2- æ›´æ–°è®°å½•æ›´æ–°è®°å½•ï¼šUPDATE tablename SET filed1= value1,field2= value2, â€¦ filedn=valuen [WHERE CONDITION],ä¾‹å¦‚ï¼Œ`update emp set sal=4000 where ename=â€˜lisaâ€™;`` æ›´æ–°å¤šä¸ªè¡¨ä¸­çš„è®°å½•ï¼šUPDATE t1,t2,â€¦tn set t1.field=value1,tn.field=valuen [WHERE CONDITION],å®é™…æ“ä½œæš‚ä¸”ä¸ä¼š 3- åˆ é™¤è®°å½•DELETE FROM tablename [WHERE CONDITION]ä¾‹å¦‚ï¼Œdelete from emp where ename=â€˜lisaâ€™; åˆ é™¤å¤šä¸ªè¡¨ä¸­çš„è®°å½•ï¼šDELETE t1,t2,..tn FROM t1,t2,â€¦tn [WHERE CONDITION],å®é™…æ“ä½œæš‚ä¸”ä¸ä¼šPS: ä¸è®ºæ˜¯å•è¡¨è¿˜æ˜¯å¤šè¡¨ï¼Œä¸åŠ whereæ¡ä»¶éƒ½ä¼šæŠŠè¡¨çš„æ‰€æœ‰è®°å½•åˆ é™¤ï¼› 4- æŸ¥è¯¢è®°å½•SELECT FROM tablename [WHERE CONDITION]ä¾‹å¦‚,select from emp;,ä¸ºæŸ¥è¯¢empè¿™ä¸ªè¡¨ä¸­çš„æ‰€æœ‰å­—æ®µã€‚å¦‚æœæƒ³è¦éƒ¨åˆ†å­—æ®µçš„è¯ï¼Œéœ€è¦åˆ†åˆ«å†™å‡ºå„ä¸ªå­—æ®µçš„åå­—ï¼Œä¾‹å¦‚ select ename from emp; ï¼ˆ1ï¼‰æŸ¥è¯¢é‡å¤è®°å½•ç”¨åˆ°â€œdistinctâ€,ä¾‹å¦‚ select distinct slaer from emp; ï¼ˆ2ï¼‰æ¡ä»¶æŸ¥è¯¢å…³é”®è¯ï¼šwhereï¼Œä¾‹å¦‚ select * from emp where name=Lisa;å…¶ä¸­â€œ=â€ä¹Ÿå¯ä»¥æ˜¯&gt; &lt; &gt;= &lt;= != å¤šæ¡ä»¶è¿˜å¯ä»¥ä½¿ç”¨orå’Œandç­‰é€»è¾‘è¿ç®—ç¬¦è¿›è¡Œå¤šæ¡ä»¶è”åˆæŸ¥è¯¢ã€‚ ï¼ˆ3ï¼‰æ’åˆ—é¡ºåºå’Œé™åˆ¶è¯­æ³•å¦‚ä¸‹ï¼šSELECT * FROM tablename [WHERE CONDTION] [ORDER BY field1 [DESC/ASC],field2 [DESC/ASC],â€¦ fieldn [DESC/ASC]]ã€‚ ä¸å†™å…³é”®å­—é»˜è®¤æˆ‘ASC(å‡åºæ’åº)ã€‚ORDER BY åé¢å¯ä»¥è·Ÿä¸åŒçš„å­—æ®µï¼Œæ¯ä¸ªå­—æ®µå¯ä»¥æœ‰ä¸åŒçš„æ’åºã€‚ å¯¹äºæ’åºåçš„è®°å½•ï¼Œå¦‚æœåªå¸Œæœ›æ˜¾ç¤ºä¸€éƒ¨åˆ†ï¼Œè¿™æ—¶å°±éœ€è¦ç”¨åˆ°LIMITå…³é”®å­—ã€‚è¯­æ³•å¦‚ä¸‹ï¼šSELECT â€¦ [LIMIT offset_start,row_count]ã€‚ ä¾‹å¦‚select * from emp order by sal limit 3; select * from emp order by sal limit 1,3; limit ç»å¸¸å’Œ order by ä¸€èµ·é…åˆä½¿ç”¨æ¥è¿›è¡Œè®°å½•çš„åˆ†é¡µæ˜¾ç¤ºã€‚ ï¼ˆ4ï¼‰èšåˆ ç”¨äºæ±‡æ€»æ“ä½œï¼Œä¾‹å¦‚ç»Ÿè®¡ã€‚è¯­æ³•å¦‚ä¸‹ï¼š123456SELECT [field1,field2,â€¦fieldn] fun_nameFROM tablename[WHERE where_condition][GROUP BY field1,field2,â€¦fieldn [WITH ROLLUP]][HAVING where_condtion] å…¶ä¸­ï¼š fun_name è¡¨ç¤ºè¦åšçš„èšåˆæ“ä½œï¼Œä¹Ÿå°±æ˜¯èšåˆå‡½æ•°ï¼Œå¸¸ç”¨çš„æœ‰sum count max min GROUP BY è¡¨ç¤ºè¦è¿›è¡Œåˆ†ç±»èšåˆçš„å­—æ®µï¼Œæ¯”å¦‚æŒ‰ç…§éƒ¨åˆ†åˆ†ç±»ç»Ÿè®¡å‘˜å·¥æ•°é‡ï¼Œéƒ¨é—¨å°±åº”è¯¥å†™åœ¨group by åé¢ WITH ROLLUPæ˜¯å¯é€‰è¯­æ³•ï¼Œè¡¨æ˜æ˜¯å¦å¯¹åˆ†ç±»èšåˆåçš„ç»“æœè¿›è¡Œå†æ±‡æ€» HAVING è¡¨ç¤ºå¯¹åˆ†ç±»åçš„ç»“æœå†è¿›è¡Œæ¡ä»¶çš„è¿‡æ»¤ã€‚PSï¼šhavingå’Œwhereéƒ½æ˜¯è¿‡æ»¤ï¼Œwhereæ˜¯åœ¨èšåˆå‰è¿‡æ»¤ï¼Œhavingæ˜¯å¯¹èšåˆåçš„ç»“æœè¿‡æ»¤ã€‚ ç»Ÿè®¡æ€»äººæ•°ï¼š select count(1) from emp;ç»Ÿè®¡å„ä¸ªéƒ¨é—¨çš„äººæ•°ï¼š select deptno,count(1) from emp group by deptno;æ—¢ç»Ÿè®¡éƒ¨é—¨äººæ•°åˆç»Ÿè®¡æ€»äººæ•°ï¼šselect deptno.count(1) from emp group by deptno with rollup;ç»Ÿè®¡éƒ¨é—¨äººæ•°å¤§äº1çš„éƒ¨é—¨ï¼š select deptno.count(1) from emp group by deptno having count(1)&gt;1;ç»Ÿè®¡å…¬å¸æ‰€æœ‰å‘˜å·¥çš„å…¬å¸è–ªæ°´æ€»é¢ã€æœ€é«˜å’Œæœ€ä½è–ªæ°´ï¼šselect sum(sal),max(sal),min(sal) from emp; ï¼ˆ5ï¼‰è¡¨è¿æ¥è¡¨è¿æ¥åˆ†ä¸ºå†…è¿æ¥å’Œå¤–é“¾æ¥ï¼Œå†…è¿æ¥ä»…ä»…é€‰å‡ºä¸¤å¼ è¡¨ä¸­äº’ç›¸åŒ¹é…çš„è®°å½•ï¼Œè€Œå¤–è¿æ¥ä¼šé€‰å‡ºå…¶ä»–ä¸åŒ¹é…çš„è®°å½•ï¼Œæœ€å¸¸ç”¨çš„æ˜¯å†…è¿æ¥ã€‚ä¾‹å¦‚ï¼ŒæŸ¥è¯¢æ‰€æœ‰é›‡å‘˜çš„åå­—å’Œæ‰€åœ¨çš„éƒ¨é—¨åç§°ï¼Œå› ä¸ºé›‡å‘˜åç§°å’Œéƒ¨é—¨åˆ†åˆ«æ”¾åœ¨è¡¨empã€deptä¸­ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨è¡¨è¿æ¥æ¥æŸ¥è¯¢ã€‚select ename,deptno from emp,dept where emp.deptno=dept.deptno; å¤–é“¾æ¥åˆ†ä¸ºå·¦é“¾æ¥å’Œå³é“¾æ¥ã€‚æ­¤å¤„çŸ¥è¯†ç‚¹æœªæŒæ¡ã€‚ï¼ˆ6ï¼‰å­æŸ¥è¯¢æŸäº›æƒ…å†µä¸‹ï¼Œå½“è¿›è¡ŒæŸ¥è¯¢çš„æ—¶å€™ï¼Œéœ€è¦çš„æ¡ä»¶æ˜¯å¦å¤–ä¸€ä¸ªselectè¯­å¥çš„ç»“æœï¼Œè¿™æ—¶å°±ä¼šç”¨åˆ°å­æŸ¥è¯¢ã€‚å…³é”®å­—ï¼šinã€not inã€=ã€existsã€not existsç­‰,ä¾‹å¦‚ï¼Œ select * from emp where deptno in(select deptno from dept)ã€‚PSï¼šè¡¨è¿æ¥åœ¨å¾ˆå¤šæƒ…å†µä¸‹ç”¨äºä¼˜åŒ–å­è¿æ¥ã€‚ å››ã€DCLè¯­å¥DCLè¯­å¥ä¸»è¦æ˜¯DBAç”¨æ¥ç®¡ç†ç³»ç»Ÿä¸­çš„å¯¹è±¡æƒé™æ—¶ä½¿ç”¨ï¼Œå¼€å‘äººå‘˜å¾ˆå°‘ä½¿ç”¨ï¼Œä¾‹å¦‚1mysql &gt; grant all PRIVILEGES on db_name.* to 'username'@'xxx.xxx.xx.x' identified by 'password' WITH GRANT OPTION; grant ä¸ºæ”¾å‡ºæƒé™ï¼Œselectä¸ºæ”¶å›æƒé™ã€‚","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"http://yoursite.com/categories/æ•°æ®åº“/"}],"tags":[{"name":"SQL","slug":"SQL","permalink":"http://yoursite.com/tags/SQL/"},{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"http://yoursite.com/tags/æ•°æ®åº“/"},{"name":"SQLè¯­å¥","slug":"SQLè¯­å¥","permalink":"http://yoursite.com/tags/SQLè¯­å¥/"}]},{"title":"æ•°æ®åº“çš„äº‹åŠ¡ä¸é”","slug":"æ•°æ®åº“çš„äº‹åŠ¡ä¸é”","date":"2018-01-03T07:15:58.000Z","updated":"2018-01-03T07:39:57.375Z","comments":true,"path":"2018/01/03/æ•°æ®åº“çš„äº‹åŠ¡ä¸é”/","link":"","permalink":"http://yoursite.com/2018/01/03/æ•°æ®åº“çš„äº‹åŠ¡ä¸é”/","excerpt":"","text":"å­¦ä¹ æ•°æ®åº“çš„äº‹åŠ¡ä¸é”ä¹‹å‰éœ€è¦å…ˆäº†è§£ä¸‹ä»€ä¹ˆæ˜¯å¹¶å‘ï¼š å¤šä¸ªç”¨æˆ·å¯¹åŒä¸€æ•°æ®è¿›è¡Œäº¤äº’å«åšå¹¶å‘ã€‚å¦‚æœä¸åŠ ä»¥æ§åˆ¶ï¼Œå¹¶å‘å¯èƒ½å¼•èµ·å¾ˆå¤šé—®é¢˜ã€‚æ•°æ®åº“æä¾›äº†å¯ä»¥åˆç†è§£å†³å¹¶å‘é—®é¢˜çš„æ–¹æ¡ˆã€‚ ä¸€ã€äº‹åŠ¡ äº‹åŠ¡çš„æ¦‚å¿µï¼šç±»æ¯”äºé“¶è¡Œè½¬è´¦ï¼ŒAè½¬ç»™B100å…ƒï¼Œé‚£ä¹ˆAçš„è´¦æˆ·å‡å°‘500ï¼ŒBçš„è´¦æˆ·å¢åŠ 500å…ƒï¼Œè¿™ä¸ªä¸¤ä¸ªæ“ä½œå¿…é¡»å…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå°±å…¨éƒ¨ä¸æ‰§è¡Œã€‚æ•°æ®åº“çš„çš„äº‹åŠ¡æ€»æ˜¯å°†æŒ‡å®šçš„ä¸€æ¡è¯­å¥æˆ–å¤šæ¡è¯­å¥çœ‹æˆä¸€ä¸ªå…¨éƒ¨æ‰§è¡Œæˆ–è€…å…¨éƒ¨ä¸æ‰§è¡Œçš„æœ€å°ç»„åˆå…¨éƒ¨ç»„åˆã€‚ äº‹åŠ¡ç±»å‹ï¼šå¦‚SELECT INSERT UPDATE DELETE 1- æ˜¾ç¤ºäº‹åŠ¡å¤„ç†æ¨¡å¼é€šè¿‡START TRANSACTION æ ‡è®°äº‹åŠ¡èµ·å§‹ç‚¹ï¼Œå¦‚æœå¼€å¯äº‹åŠ¡åæ‰§è¡Œçš„è¯­å¥æ˜¯æŒ‰ç…§æœŸæœ›æ­£ç¡®æ‰§è¡Œçš„åˆ™ä»¥COMMIT TRANSACTION æ¥ç»“æŸäº‹åŠ¡ï¼›å¦‚æœå¼€å§‹äº‹åŠ¡åæ‰§è¡Œçš„è¯­å¥ç»“æœä¸æ˜¯æ‰€æœŸæœ›çš„ï¼Œå¹¶å¸Œæœ›å–æ¶ˆåˆšæ‰çš„æ“ä½œï¼Œåˆ™ä»¥ROLLBACK TRANSATION æ¥ç»“æŸäº‹åŠ¡ï¼Œï¼ˆç›¸å½“äºæ’¤é”€ï¼‰ï¼Œè¯¥åŠ¨ä½œæˆä¸ºå›æ»šã€‚å‰æ»šæŒ‡çš„æ˜¯å†æ¬¡æ‰§è¡Œä¸€æ¬¡äº‹åŠ¡ä¸­çš„æ“ä½œã€‚ 2- è‡ªåŠ¨æäº¤äº‹åŠ¡æ¨¡å¼é»˜è®¤æƒ…å†µä¸‹ï¼ŒMySQLæ˜¯è‡ªåŠ¨æäº¤çš„ã€‚åœ¨è¯¥æ¨¡å¼ä¸‹ï¼Œæ¯æ¡è¯­å¥éƒ½è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªäº‹åŠ¡ã€‚å½“æ¯ä¸ªSQLè¯­å¥æ‰§è¡Œå®Œæˆåï¼Œä¸æ˜¯è¢«æäº¤å°±æ˜¯è¢«å›æ»šï¼Œå¦‚æœæ‰§è¡ŒæˆåŠŸåˆ™æäº¤ï¼Œæ‰§è¡Œå¤±è´¥åˆ™å›æ»šã€‚æ³¨æ„ï¼šåœ¨è¯¥æ¨¡å¼ä¸‹ï¼Œæ‰§è¡Œçš„è¯­å¥å¦‚æœå‡ºç°ç¼–è¯‘é”™è¯¯ï¼ˆä¾‹å¦‚å…³é”®å­—é”™è¯¯ï¼‰è€Œéè¿è¡Œé”™è¯¯è¯¥æ‰¹è¯­å¥éƒ½ä¸ä¼šæ‰§è¡Œï¼Œè€Œä¸æ˜¯æ‰§è¡Œåå†å›æ»šï¼›å¦‚æœæ˜¯è¿è¡Œé”™è¯¯ä¸ä¼šå¯¼è‡´è¯¥æ‰¹è¯­å¥éƒ½ä¸æ‰§è¡Œï¼Œè€Œæ˜¯é”™è¯¯è¯­å¥ä¼šå›æ»šï¼Œä¹‹å‰è¯­å¥æ­£å¸¸æ‰§è¡Œã€‚ 3-éšå¼äº‹åŠ¡å¤„ç†æ¨¡å¼å¯ä»¥é€šè¿‡ SET IMPLICIT_TRANSACTIONS ON å’Œ SET IMPLICIT_TRANSACTIONS OFF æ¥å¯åŠ¨å’Œå…³é—­éšå¼æ¨¡å¼ã€‚ä¸æ˜¾ç¤ºäº‹åŠ¡å¤„ç†æ¨¡å¼ç›¸æ¯”ï¼Œå®ƒçœç•¥äº†äº‹åŠ¡èµ·å§‹ç‚¹ï¼Œä¹Ÿå°±æ˜¯START TRANSATIONã€‚ PS:äº‹åŠ¡ä¹Ÿæ˜¯å¯ä»¥åµŒå¥—çš„ï¼Œè¿™é‡Œä¸è¿›è¡Œè¯¦ç»†è¯´æ˜ã€‚ äºŒã€å¹¶å‘è®¿é—®å¼•èµ·çš„é—®é¢˜å¹¶å‘ï¼šä¸¤ä¸ªç”¨æˆ·æˆ–è€…ä¸¤ä¸ªä»¥ä¸Šçš„ç”¨æˆ·åœ¨åŒä¸€æ—¶é—´ä¸åŒä¸€å¯¹è±¡è¿›è¡Œäº¤äº’ã€‚ä¾‹å¦‚æ˜¥èŠ‚æŠ¢ç¥¨ï¼ŒæŠ¢çš„äººè¶Šå¤šï¼Œå¹¶å‘æ•°å°±è¶Šé«˜ï¼Œå¯¹ç³»ç»Ÿæ€§èƒ½è¦æ±‚å°±è¶Šé«˜ã€‚ 1- ä¸¢å¤±æ›´æ–°å½“ä¸¤ä¸ªæˆ–å¤šä¸ªäº‹åŠ¡å¯¹åŒä¸€æ•°æ®æœ€åˆçš„å€¼è¿›è¡Œæ›´æ–°æ—¶ï¼Œç”±äºæ¯ä¸ªäº‹åŠ¡éƒ½ä¸çŸ¥é“å…¶ä»–äº‹åŠ¡çš„å­˜åœ¨ï¼Œæœ€åæäº¤çš„äº‹åŠ¡ä¸­çš„æ›´æ–°æ“ä½œå°±ä¼šè¦†ç›–æ‰å…¶ä»–äº‹åŠ¡æ‰€åšçš„æ›´æ–°ï¼Œè¿™å°±å¯¼è‡´å…¶ä»–äº‹åŠ¡çš„æ›´æ–°æ“ä½œä¸¢å¤±ã€‚ 2- è„è¯»äº‹åŠ¡å®Œæˆæ•°æ®æ›´æ–°åï¼Œè¿™æ—¶å…¶ä»–äº‹åŠ¡å»æŸ¥è¯¢è¯¥è¡Œæ•°æ®çš„æ—¶å€™è¯»å–çš„æ•°æ®æ˜¯ä¸´æ—¶çš„ï¼Œå¦‚æœæœ€åæ›´æ–°çš„äº‹åŠ¡è¢«å›æ»šï¼Œè¿™ä¸ªä¸´æ—¶æ•°æ®å¯¹äºæŸ¥è¯¢çš„äº‹åŠ¡æ¥è¯´å°±æ˜¯â€œè„æ•°æ®â€ã€‚ 3- ä¸å¯é‡å¤è¯»åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸¤æ¬¡çš„æŸ¥è¯¢ä¹‹é—´ï¼ŒåŒä¸€æ•°æ®è¢«å…¶ä»–äº‹åŠ¡æ›´æ–°ï¼Œå¯¼è‡´åŒä¸€äº‹åŠ¡ä¸­çš„ä¸¤æ¬¡æŸ¥è¯¢ç»“æœä¸åŒï¼Œè¿™æ ·çš„ç°è±¡å«åšä¸å¯é‡å¤è¯»ã€‚ç¡®å®šçš„æŸæ¡è®°å½•ã€‚ 4- å¹»å½±è¯»ä¸€ä¸ªäº‹åŠ¡ä¸­æŒ‡å®šèŒƒå›´çš„ä¸¤æ¬¡æŸ¥è¯¢ç»“æœå› ä¸ºå…¶ä»–äº‹åŠ¡æ›´æ–°äº†ç¬¦åˆèŒƒå›´çš„æ•°æ®ï¼Œå¯¼è‡´ä¸¤æ¬¡ç»“æœæŸ¥è¯¢ç»“æœä¸åŒï¼Œè¿™æ ·çš„ç°è±¡å«åšå¹»å½±è¯»ã€‚å¹»å½±è¯»ä¸ä»…ä»…åªé€‚ç”¨äºç¬¦åˆæ¡ä»¶çš„èŒƒå›´å†…çš„è®°å½•æœ‰å¤šå°‘ï¼Œè¿˜é€‚ç”¨äºæ¶‰åŠåˆ°èŒƒå›´æ¦‚å¿µçš„æƒ…å†µã€‚ä¸èŒƒå›´æ•°æ®æœ‰å…³ã€‚ ä¸‰ã€é”é”ï¼Œå³é”å®šï¼Œåœ¨æ•°æ®åº“çš„æ¦‚å¿µä¸ºï¼šåœ¨å“ªäº›æ•°æ®æˆ–è€…å¯¹è±¡ä¸Šè·å–äº†é”å°±å¯¹å¯¹åº”çš„æ•°æ®æˆ–è€…å¯¹è±¡è¿›è¡Œäº†é”å®šï¼Œå…¶ä»–äº‹åŠ¡å°±æ— æ³•è·å–å’Œç°æœ‰é”ç›¸å†²çªçš„é”ã€‚é”æ˜¯äº‹åŠ¡ç”¨æ¥ä¿æŠ¤ä¸è‡ªå·±äº¤äº’çš„æ•°æ®æˆ–è€…å¯¹è±¡ä¸å—å…¶ä»–äº‹åŠ¡å¹²æ‰°çš„æœºåˆ¶ï¼Œå®ç°äº†äº‹åŠ¡ä¸äº‹åŠ¡ä¹‹é—´çš„éš”ç¦»ã€‚æ­£æ˜¯å› ä¸ºé”çš„å­˜åœ¨ï¼Œæ‰å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚åˆç†åœ°è§£å†³å¹¶å‘è®¿é—®å¸¦æ¥çš„é—®é¢˜ã€‚ 1- é”çš„ç²’åº¦ä¸é”å‡çº§æ•°æ®åº“å¯ä»¥åœ¨æŸä¸€è¡Œè·å–é”ï¼Œä¹Ÿå¯ä»¥å¯¹æŸä¸€å¼ è¡¨è·å–é”ï¼Œä¹Ÿå¯ä»¥å¯¹æ•´ä¸ªæ•°æ®åº“è·å–é”ã€‚è¿™ç§å¤šå±‚æ¬¡çš„é”ç»“æ„æˆä¸ºé”çš„ç²’åº¦ã€‚é”çš„ç²’åº¦è¶Šç²—ï¼Œå¹¶å‘åº¦è¶Šä½ï¼Œç³»ç»Ÿæ€§èƒ½è¶Šé«˜ã€‚ä¸‹é¢å¯ä»¥ç”³è¯·é”çš„ç²’åº¦ç±»å‹ï¼š è¡Œæˆ–è¡Œæ ‡è¯†ç¬¦ï¼ˆRIDï¼‰ï¼šå±äºè¡Œçº§é”ï¼ˆInnoDBï¼‰ï¼Œç”¨äºé”å®šå †ä¸­æŸä¸ªè¡Œçš„è¡Œæ ‡è¯†ç¬¦ã€‚ é”®ï¼ˆKeyï¼‰ï¼šå±äºè¡Œçº§é”ï¼Œåœ¨ç´¢å¼•çš„é”®ä¸Šå­˜æ”¾é”ï¼Œç”¨æˆ·ä¿æŠ¤äº‹åŠ¡ä¸­çš„é”®çš„èŒƒå›´ã€‚ é¡µï¼ˆPageï¼‰ï¼šé”å®šè¯¥é¡µä¸­çš„æ‰€æœ‰æ•°æ®æˆ–é”®ã€‚ åŒºï¼ˆExcentï¼‰ï¼šé”å®šæ•´ä¸ªåŒºæ®µï¼ŒåŒ…æ‹¬é‡Œé¢çš„é¡µä»¥åŠé¡µä¸­çš„æ•°æ®è¡Œå’Œé”®ã€‚ è¡¨ï¼ˆTableï¼‰ï¼šé”å®šæ•´ä¸ªè¡¨ä»¥åŠä¸è¡¨å…³è”çš„æ‰€æœ‰å¯¹è±¡ï¼Œå¦‚è¡¨ä¸­çš„æ•°æ®è¡Œã€ç´¢å¼•é”®ã€‚ æ•°æ®åº“ï¼ˆDatabaseï¼‰ï¼šé”å®šæ•´ä¸ªæ•°æ®åº“ã€‚ ç”±ä½å±‚æ¬¡çš„é”å‡çº§åˆ°é«˜å±‚æ¬¡çš„é”æˆä¸ºé”å‡çº§ã€‚ 2- é”çš„ç±»å‹æ•°æ®åº“å¼•æ“åŸºäºäº‹åŠ¡ç±»å‹é€‰æ‹©ä¸åŒçš„é”ï¼Œè¿™äº›é”å†³å®šäº†å¹¶å‘äº‹ä»¶è®¿é—®èµ„æºçš„æ–¹å¼ã€‚æ­¤å¤„åªåˆ—å‡ºä¸‰ç§ç±»å‹çš„é”ã€‚ ï¼ˆ1ï¼‰å…±äº«é”ï¼ˆSé”ï¼‰å…±äº«é”ç”¨äºåªéœ€è¦è¯»å–ä¸éœ€è¦è¿›è¡Œä¿®æ”¹æˆ–æ›´æ–°æ•°æ®çš„æ“ä½œï¼Œå¦‚SELECTè¯­å¥å°±æ˜¯ä¸€ç§æœ€åŸºæœ¬å¸¸è§çš„ç”³è¯·å…±äº«é”çš„è¯­å¥ã€‚å…±äº«é”é¿å…äº†ä¸å¯é‡å¤è¯»ä¸å¹»å½±è¯»é—®é¢˜ã€‚ ï¼ˆ2ï¼‰ç‹¬å é”ï¼ˆXé”ï¼‰ç‹¬å é”ä¹Ÿæˆä¸ºæ’ä»–é”ã€‚ä¸å…¶ä»–æ‰€æœ‰çš„é”éƒ½å†²çªã€‚å½“éœ€è¦è¿›è¡Œæ•°æ®æ›´æ”¹æ“ä½œå¦‚INSERTã€UPDATEã€DELETEæ—¶ï¼Œé”ç®¡ç†å™¨å°±ä¼šåˆ†é…Xé”ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ•°æ®ä¿®æ”¹æ—¶åŒ…å«ä¸¤ä¸ªåŠ¨ä½œï¼šè¯»å–éœ€è¦çš„æ•°æ®å’Œä¿®æ”¹æ•°æ®ï¼Œå› æ­¤åœ¨æ•°æ®ä¿®æ”¹æ—¶ä¼šç”³è¯·å…±äº«é”å’Œç‹¬å é”ã€‚åœ¨åŒä¸€å¼ è¡¨ä¸­ä¿®æ”¹æ•°æ®ï¼Œæ­¤æ—¶å…±äº«é”æ›´åº”è¯¥æˆä¸ºæ›´æ–°é”ï¼Œä½†æ˜¯å¦‚æœæ›´æ–°æ“ä½œè¿æ¥äº†å…¶ä»–è¡¨ï¼Œé‚£ä¹ˆå…¶ä»–è¡¨ä¸­å°±ä¼šå­˜åœ¨å…±äº«é”ï¼Œå¹¶åœ¨éœ€è¦çš„æ•°æ®ä¸Šç”³è¯·ç‹¬å é”ã€‚ ï¼ˆ3ï¼‰æ›´æ–°é”ï¼ˆUé”ï¼‰æ›´æ–°é”å’Œå…±äº«é”å…¼å®¹ï¼Œå’Œç‹¬å é”å†²çªã€‚æ›´æ–°é”å’Œæ›´æ–°é”ä¹Ÿå†²çªã€‚ä¿®æ”¹æ•°æ®æ—¶ä¼šå…ˆç”³è¯·æ›´æ–°é”åç”³è¯·ç‹¬å é”ï¼Œ æ›´æ–°é”æ˜¯ä¸€ç§è¿‡æ¸¡é”ã€‚åœ¨è¿›è¡Œæ•°æ®æœç´¢æ—¶æŒæœ‰äº†æ›´æ–°é”ï¼Œç”±äºæ›´æ–°é”å’Œå…±äº«é”å…¼å®¹ï¼Œå› æ­¤æ­¤æ—¶å…¶ä»–äº‹åŠ¡æ˜¯å…è®¸è¯»å–æ•°æ®çš„ï¼Œå½“ç¡®å®šä¿®æ”¹æ•°æ®åï¼Œæ›´æ–°é”ç­‰å¾…å…¶ä»–äº‹åŠ¡çš„å…±äº«é”é‡Šæ”¾åå°±ä¼šè½¬æ¢ä¸ºç‹¬å é”ï¼ˆé‚£ä¹ˆç­‰å¾…æ—¶é—´å¦‚ä½•è®¡ç®—ï¼Ÿï¼‰ï¼Œå¹¶å°†å…¶ä»–äº‹åŠ¡çš„ç›¸å…³èµ„æºçš„é”ç”³è¯·å…¨éƒ¨é˜Ÿåˆ—åŒ–å µåœ¨æ•°æ®ä¿®æ”¹çš„è¿›ç¨‹å¤–ï¼Œç›´åˆ°ç‹¬å é”é‡Šæ”¾ï¼Œå…¶ä»–äº‹åŠ¡æ‰èƒ½è¿›è¡Œç›¸å…³èµ„æºçš„ç”³è¯·ã€‚ æ­»é”ï¼šä¸¤ä¸ªäº‹åŠ¡éƒ½åœ¨ç­‰å¾…ä¸€ä¸ªèµ„æºï¼Œä½†åŒæ—¶åˆç›¸äº’é˜»æ­¢å¯¹æ–¹è·å–èµ„æºï¼Œè¿™æ—¶å°±ä¼šå‘ç”Ÿæ­»é”ç°è±¡ã€‚ä¾‹å¦‚ï¼Œäº‹åŠ¡Aå’Œäº‹åŠ¡Béƒ½è·å–äº†æŸä¸€è¡Œæ•°æ®çš„å…±äº«é”ï¼ˆä¹Ÿå°±æ˜¯å¯ä»¥æŸ¥çœ‹è¯¥æ•°æ®ï¼‰ï¼Œå½“äº‹åŠ¡Aæƒ³ä¿®æ”¹è¯¥æ•°æ®æ—¶è¦å°†å…±äº«é”è½¬åŒ–ä¸ºç‹¬å é”ï¼Œè¿™å°±éœ€è¦ç­‰å¾…äº‹åŠ¡Bé‡Šæ”¾å…±äº«é”ï¼Œä½†æ˜¯äº‹åŠ¡Bä¹Ÿæƒ³ä¿®æ”¹æ•°æ®ï¼Œå°†å…±äº«é”è½¬æ¢ä¸ºç‹¬å é”ï¼Œå®ƒå°†ç­‰å¾…äº‹åŠ¡Aé‡Šæ”¾å…±äº«é”ï¼Œè¿™æ ·ä¸¤ä¸ªäº‹åŠ¡ä¹‹é—´å½¢æˆäº†åƒµå±€ã€‚ æ›´æ–°é”å’Œå…±äº«é”æ˜¯å…¼å®¹çš„ï¼Œå› æ­¤æ›´æ–°é”å’Œå…±äº«é”å¯èƒ½åœ¨åŒä¸€èµ„æºä¸Šç›¸äº’å…±å­˜ï¼Œä½†æ˜¯æ›´æ–°é”å’Œæ›´æ–°é”æ˜¯ç›¸äº’å†²çªçš„ï¼Œæ‰€ä»¥åªèƒ½æœ‰ä¸€ä¸ªäº‹åŠ¡å¯¹æ•°æ®æœ‰æ›´æ–°é”ã€‚åœ¨è¿‡åº¦ä¸ºç‹¬å é”å‰ï¼Œåªæœ‰æ›´æ–°é”çš„äº‹åŠ¡å¿…é¡»å…ˆç­‰å¾…å…¶ä»–äº‹åŠ¡é‡Šæ”¾æ‰€æœ‰çš„å…±äº«é”ï¼Œè¿™å°±é¿å…äº†ä¸Šè¿°çš„æ­»é”é—®é¢˜ã€‚ å››ã€äº‹åŠ¡éš”ç¦»çº§åˆ«åœ¨æ•°æ®åº“ç³»ç»Ÿä¸­å¯ä»¥é€šè¿‡è®¾ç½®äº‹åŠ¡éš”ç¦»çº§åˆ«é—´æ¥åœ°æ§åˆ¶é”ï¼Œå®ç°äº‹åŠ¡ä¹‹é—´çš„éš”ç¦»ï¼Œä»è€Œè§£å†³å¹¶å‘é—®é¢˜ã€‚äº‹åŠ¡éš”ç¦»çº§åˆ«æ˜¯å¹¶å‘æ§åˆ¶çš„æ•´ä½“è§£å†³æ–¹æ¡ˆï¼Œå…¶å®è´¨æ˜¯é€šè¿‡æ§åˆ¶é”æ¥æ§åˆ¶äº‹åŠ¡ä¹‹é—´å¦‚ä½•è¿›è¡Œéš”ç¦»ã€‚ 1- æäº¤è¯»ï¼ˆREAD COMMITTEDï¼‰æŸ¥è¯¢ç”³è¯·çš„å…±äº«é”åœ¨è¯­å¥æ‰§è¡Œå®Œæ¯•åå°±é‡Šæ”¾ï¼Œä¸éœ€è¦ç­‰å¾…äº‹åŠ¡ç»“æŸåé‡Šæ”¾ï¼›æ•°æ®ä¿®æ”¹ç”³è¯·çš„ç‹¬å é”ä¸€ç›´æŒæœ‰ï¼Œç›´åˆ°äº‹åŠ¡ç»“æŸæ‰é‡Šæ”¾ã€‚è®¾ç½®æäº¤è¯»ï¼Œå¯ä»¥é¿å…è„è¯»é—®é¢˜ï¼Œä½†æ˜¯ä¸èƒ½è§£å†³ä¸å¯é‡å¤è¯»å’Œå¹»å½±è¯»ã€‚ PSï¼šè®¾ç½®äº‹åŠ¡éš”ç¦»çº§åˆ«å’ŒæŸ¥çœ‹ã€‚éš”ç¦»çº§åˆ«çš„è®¾ç½®æ˜¯å¯¹ä¼šè¯çº§åˆ«çš„ï¼Œæ‰€ä»¥åªå¯¹å½“å‰ä¼šè¯æœ‰æ•ˆã€‚ 2- å¯æäº¤è¯»ï¼ˆREAD UNCOMMITTEDï¼‰æœªæäº¤è¯»æ˜¯æ§åˆ¶çº§åˆ«æœ€ä½çš„çº§åˆ«ï¼Œè®¾ç½®ä¹‹åï¼Œè¯¥ä¼šè¯çš„æ‰€æœ‰è¯»æ“ä½œå°†ä¸ç”³è¯·å…±äº«é”ï¼Œå› æ­¤è¯»æ—¶å°†å¿½ç•¥æ‰€æœ‰çš„é”ï¼Œä½†æ˜¯æ›´æ–°æ—¶ä»ç„¶ä¼šç”³è¯·ç‹¬å é”ï¼Œè¿™ç§æƒ…å†µä¸‹å¹¶å‘å¸¦æ¥çš„é—®é¢˜éƒ½æœ‰å¯èƒ½å‘ç”Ÿã€‚ 3- å¯é‡å¤è¯»ï¼ˆREPEATABLE READï¼‰MySQLé»˜è®¤äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œå½“è®¾ç½®ä¸ºå¯é‡å¤è¯»éš”ç¦»çº§åˆ«æ—¶ï¼Œé™¤äº†ç‹¬å é”ä¼šä¸€ç›´ä¿æŒåˆ°äº‹åŠ¡ç»“æŸï¼Œå…±äº«é”ä¹Ÿä¸€æ ·åˆ°äº‹åŠ¡ç»“æŸã€‚å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹ï¼Œè„è¯»ã€ä¸¢å¤±çš„æ›´æ–°å’Œä¸å¯é‡å¤è¯»é—®é¢˜éƒ½èƒ½å¤Ÿé¿å…ï¼Œä½†æ˜¯ä¹Ÿå› ä¸ºå…±äº«é”ä¸€ç›´æŒæœ‰ï¼Œä¼šå¯¼è‡´å…¶ä»–äº‹åŠ¡ä¸èƒ½å¯¹ç›¸å…³æ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œé™ä½äº†å¹¶å‘åº¦å’Œæ€§èƒ½ã€‚å¯é‡å¤è¯»éš”ç¦»çº§åˆ«æ— æ³•è§£å†³å¹»å½±è¯»é—®é¢˜ã€‚ 4- ä¸²è¡ŒåŒ–ï¼ˆSERIALIZABLEï¼‰ä¸²è¡ŒåŒ–éš”ç¦»çº§åˆ«éš”ç¦»å±‚æ¬¡æœ€é«˜ï¼Œå®ƒèƒ½å¤Ÿé¿å…ä¸¢å¤±çš„æ›´æ–°ã€è„è¯»ã€ä¸å¯é‡å¤è¯»å’Œå¹»å½±è¯»é—®é¢˜ã€‚è®¾ç½®ä¸ºä¸²è¡ŒåŒ–éš”ç¦»çº§åˆ«åï¼Œå…±äº«é”ä¹Ÿå°†ä¸€ç›´æŒæœ‰åˆ°äº‹åŠ¡ç»“æŸã€‚æ¯”å¯é‡å¤è¯»æ›´ä¸¥æ ¼çš„æ˜¯å®ƒçš„é”å®šæ˜¯èŒƒå›´çš„ï¼Œè¿˜åŒ…æ‹¬æ½œåœ¨çš„æ•°æ®ä¿®æ”¹ã€‚å®ƒä¿è¯äº†èŒƒå›´å†…ä¸¤æ¬¡æŸ¥è¯¢ç»“æœä¸ä¼šå‡ºç°å¢åŠ è®°å½•æˆ–å‡å°‘è®°å½•è€Œå‡ºç°å¹»è±¡ã€‚ ä¸²è¡ŒåŒ–éš”ç¦»çº§åˆ«å¯¹é”æ§åˆ¶çš„æ–¹å¼ä¸ºï¼šå¦‚æœåœ¨æŸ¥è¯¢æŒ‡å®šæ¡ä»¶çš„åˆ—ä¸Šæœ‰ç´¢å¼•ï¼Œåˆ™åœ¨è¯¥åˆ—ç¬¦åˆæ¡ä»¶çš„èŒƒå›´è®°å½•ä¸ŠåŠ ä¸ŠKEYç²’åº¦çš„é”ï¼Œå¦‚æœåœ¨æŸ¥è¯¢æ¡ä»¶çš„åˆ—ä¸Šæ²¡æœ‰ç´¢å¼•ï¼Œåˆ™ç›´æ¥åœ¨è¡¨ä¸ŠåŠ ä¸Šå…±äº«é”ã€‚ äº”ã€éš”ç¦»çº§åˆ«ã€é”å’Œå¹¶å‘é—®é¢˜çš„å…³ç³»","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"http://yoursite.com/categories/æ•°æ®åº“/"}],"tags":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"http://yoursite.com/tags/æ•°æ®åº“/"},{"name":"æ•°æ®åº“äº‹åŠ¡","slug":"æ•°æ®åº“äº‹åŠ¡","permalink":"http://yoursite.com/tags/æ•°æ®åº“äº‹åŠ¡/"},{"name":"æ•°æ®åº“çš„é”","slug":"æ•°æ®åº“çš„é”","permalink":"http://yoursite.com/tags/æ•°æ®åº“çš„é”/"}]},{"title":"ç½‘ç»œåŸºç¡€-HTTP","slug":"ç½‘ç»œåŸºç¡€-HTTP","date":"2018-01-02T14:25:13.000Z","updated":"2018-01-02T15:10:39.828Z","comments":true,"path":"2018/01/02/ç½‘ç»œåŸºç¡€-HTTP/","link":"","permalink":"http://yoursite.com/2018/01/02/ç½‘ç»œåŸºç¡€-HTTP/","excerpt":"","text":"æœ€è¿‘Railsé¡¹ç›®éƒ¨ç½²çš„è¿‡ç¨‹ä¸­é‡åˆ°ç½‘ç»œç«¯å£çš„é—®é¢˜åŠç”¨åˆ°äº†httpç½‘ç»œåè®®çš„çŸ¥è¯†ï¼Œäºæ˜¯å†³å®šå¯¹è¿™å—çŸ¥è¯†è¿›è¡Œå›é¡¾å’Œé‡æ–°æ¢³ç†ï¼Œè¿™é‡Œæ¨èéŸ©ç«‹åˆšè€å¸ˆçš„ã€Šè®¡ç®—æœºç½‘ç»œåŸç†ã€‹ä¸€ä¹¦ï¼Œè®²çš„å¾ˆæ˜ç™½ã€‚ä»¥ä¸‹ä¸ºè¿™æ¬¡å­¦ä¹ åˆ°çš„ä¸»è¦å†…å®¹ï¼š HTTP( Hyper Text Transfer Protocol) WWW( World Wide Web),äº’è”ç½‘ä¸Šçš„ç½‘ç«™å…±åŒç»„æˆä¸‡ç»´ç½‘ã€‚ URL( Uniform Resource Locator)ï¼Œç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼Œç½‘ç«™çš„ç½‘å€ã€‚URLä¸€èˆ¬ç”±å››ä¸ªéƒ¨åˆ†ç»„æˆï¼š&lt;åè®®&gt;://&lt;ä¸»æœº&gt;:&lt;/ç«¯å£&gt;/&lt;è·¯å¾„&gt;ï¼Œä¾‹å¦‚http://106.14.190.181:80/wx ä¸€ã€HTTPåè®®ç‰ˆæœ¬ï¼š1- HTTP1.0è§„å®šæµè§ˆå™¨ä¸æœåŠ¡å™¨åªä¿æŒçŸ­æš‚çš„è¿æ¥ï¼Œæµè§ˆå™¨çš„æ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦ä¸æœåŠ¡å™¨å»ºç«‹ä¸€ä¸ªTCPè¿æ¥ï¼ŒæœåŠ¡å™¨å®Œæˆè¯·æ±‚å¤„ç†åç«‹å³æ–­å¼€TCPè¿æ¥ï¼Œæ—¢ä¸è·Ÿè¸ªæ¯ä¸ªå®¢æˆ·ä¹Ÿä¸è®°å½•è¿‡å»çš„è¯·æ±‚ã€‚ 2- HTTP1.1æ”¯æŒæŒç»­è¿æ¥ï¼Œå³æœåŠ¡å™¨åœ¨å‘é€å“åº”åï¼Œä»ç„¶åœ¨ä¸€æ®µæ—¶é—´å†…ä¿æŒè¿™æ¡TCPè¿æ¥ï¼Œä½¿å¾—åŒä¸€ä¸ªæµè§ˆå™¨å’Œè¯¥æœåŠ¡å™¨å¯ä»¥ç»§ç»­åœ¨è¿™æ¡è¿æ¥ä¸Šä¼ é€åç»­çš„HTTPè¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡ã€‚HTTP1.1çš„æŒç»­è¿æ¥æœ‰ä¸¤ç§å·¥ä½œæ–¹å¼ï¼Œå³éæµæ°´çº¿æ–¹å¼å’Œæµæ°´çº¿æ–¹å¼ã€‚éæµæ°´çº¿æ–¹å¼ï¼ˆç†è§£ä¸ºè¿…é›·ä¸€æ¬¡åªèƒ½ä¸‹è½½ä¸€ä¸ªæ–‡ä»¶ï¼‰çš„ç‰¹ç‚¹æ˜¯å®¢æˆ·åœ¨æ”¶åˆ°å‰ä¸€ä¸ªå“åº”åæ‰èƒ½å‘é€å†™ä¸€ä¸ªè¯·æ±‚ã€‚å› æ­¤ï¼Œåœ¨TCPè¿æ¥å»ºç«‹åï¼Œå®¢æˆ·æ¯è®¿é—®ä¸€æ¬¡å¯¹è±¡éƒ½è¦ç”¨å»ä¸€ä¸ªå¾€è¿”æ—¶é—´RTTï¼Œè¿™ç§æ–¹å¼æµªè´¹æœåŠ¡å™¨èµ„æºã€‚æµæ°´çº¿çš„ç‰¹ç‚¹ï¼ˆç†è§£ä¸ºè¿…é›·ä¸€æ¬¡å¯ä»¥ä¸‹è½½å¤šä¸ªæ–‡ä»¶ï¼‰æ˜¯å®¢æˆ·åœ¨æ”¶åˆ°HTTPå“åº”æŠ¥æ–‡ä¹‹å‰å°±èƒ½å¤Ÿå‘é€æ–°çš„è¯·æ±‚æŠ¥æ–‡ã€‚äºæ˜¯ä¸€ä¸ªæ¥ä¸€ä¸ªçš„è¯·æ±‚æŠ¥æ–‡åˆ°è¾¾æœåŠ¡å™¨åï¼ŒæœåŠ¡å™¨å°±å¯è¿ç»­å‘å›å“åº”æŠ¥æ–‡ï¼Œè¿™ç§æ–¹å¼ä½¿TCPè¿æ¥ä¸­çš„ç©ºé—²æ—¶é—´å‡å°‘ï¼Œæé«˜äº†æ–‡æ¡£çš„ä¸‹è½½æ•ˆç‡ã€‚ 3- HTTPè¯·æ±‚æŠ¥æ–‡ä¸å“åº”æŠ¥æ–‡ï¼ˆ1ï¼‰ è¯·æ±‚æŠ¥æ–‡ï¼šä»å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€è¯·æ±‚æŠ¥æ–‡ è¯·æ±‚æŠ¥æ–‡ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼šåˆ†åˆ«æ˜¯è¯·æ±‚è¡Œï¼Œé¦–éƒ¨è¡Œï¼Œå®ä½“ä¸»ä½“ã€‚è¯·æ±‚æŠ¥æ–‡çš„ç¬¬ä¸€è¡Œâ€œè¯·æ±‚è¡Œâ€åªæœ‰ä¸‰ä¸ªå†…å®¹ï¼Œå³æ–¹æ³•ã€è¯·æ±‚èµ„æºçš„URLï¼Œä»¥åŠHTTPçš„ç‰ˆæœ¬ã€‚æ–¹æ³•å°±æ˜¯å¯¹å¯¹è±¡çš„æ“ä½œï¼ŒHTTP1.1åè®®ä¸­å®šä¹‰äº†å…«ä¸­æ–¹æ³•ï¼Œæ¥è¡¨æ˜å¯¹Request-URLæŒ‡å®šèµ„æºçš„ä¸åŒæ“ä½œæ–¹å¼ï¼šGETã€POSTã€PUTã€DELETEã€HEADã€TRACEã€CONNECTã€OPPIONSï¼ˆ2ï¼‰å“åº”æŠ¥æ–‡ï¼šä»æœåŠ¡å™¨åˆ°è¾¾å®¢æˆ·ç«¯çš„åº”ç­” äºŒã€CookieHTTPæ˜¯ä¸€ç§æ— çŠ¶æ€çš„åè®®ï¼Œå½“ä½ æ³¨å†Œç™»å½•ä¸€ä¸ªç½‘ç«™åï¼Œå½“ä¸‹æ¬¡å†æ‰“å¼€è¿™ä¸ªç½‘ç«™åï¼Œéœ€è¦å†æ¬¡è¾“å…¥è´¦å·ä¸å¯†ç è¿›è¡Œèº«ä»½éªŒè¯ï¼ŒæœåŠ¡å™¨ä»…ä»ç½‘ç»œè¿æ¥ä¸Šæ— ä»çŸ¥é“ä½ çš„æ›¾ç»ç™»å½•çš„èº«ä»½ã€‚å¦‚æœå¸Œæœ›æœåŠ¡å™¨è¯»å–ä½ çš„æ›¾ç»ç™»å½•çš„èº«ä»½ï¼Œé‚£å°±éœ€è¦åœ¨ç”¨æˆ·è¾“å…¥è´¦å·å’Œå¯†ç åï¼ŒæœåŠ¡å™¨åœ¨ç”¨æˆ·çš„è®¡ç®—æœºå­˜æ”¾ä¸€ä¸ªé€šè¡Œè¯ï¼Œæ¥è®°å½•ç”¨æˆ·çš„èº«ä»½å’ŒçŠ¶æ€ã€‚ä»¥åå†è®¿é—®ï¼Œç½‘ç«™ï¼ˆæœåŠ¡å™¨ï¼‰å°±ä¼šå…ˆè¯»å–å®¢æˆ·ç«¯çš„é€šè¡Œè¯ã€‚æœåŠ¡å™¨å­˜æ”¾åœ¨å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰çš„é€šè¡Œè¯é€šå¸¸è¢«ç§°ä¸ºcookieã€‚ cookieå®é™…ä¸Šæ˜¯ä¸€å°æ®µçš„æ–‡æœ¬ä¿¡æ¯ï¼ˆè¯´æ˜å¯ä»¥è¿›è¡Œæ‹·è´ï¼Œä¹Ÿå°±æ˜¯åœ¨å…¶ä»–æµè§ˆå™¨å¯¼å…¥cookieä¹‹åä¸ç”¨è¾“å…¥è´¦å·å’Œå¯†ç å°±å¯ä»¥ç™»å½•äº†ï¼‰ã€‚å®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡å™¨ï¼Œå¦‚æœæœåŠ¡å™¨éœ€è¦è®°å½•è¯¥ç”¨æˆ·çŠ¶æ€ï¼Œå°±ä½¿ç”¨responseå‘å®¢æˆ·ç«¯æµè§ˆå™¨é¢å‘ä¸€ä¸ªCookieï¼Œå®¢æˆ·ç«¯æŠŠæµè§ˆå™¨ä¼šæŠŠcookieä¿å­˜èµ·æ¥ã€‚å½“æµè§ˆå™¨å†è¯·æ±‚è¯¥ç½‘ç«™æ—¶ï¼Œæµè§ˆå™¨å§è¯·æ±‚çš„ç½‘å€è¿åŒè¯¥Cookieä¸€åŒæäº¤ç»™æœåŠ¡å™¨ã€‚æœåŠ¡å™¨æ£€æŸ¥è¯¥Cookieï¼Œä»¥æ­¤æ¥è¾¨è®¤ç”¨æˆ·èº«ä»½å’ŒçŠ¶æ€ã€‚æœåŠ¡å™¨è¿˜å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹cookieçš„å†…å®¹ã€‚ ä¸‰ã€é€šè¿‡ä»£ç†æœåŠ¡å™¨è®¿é—®ç½‘ç«™ä»£ç†æœåŠ¡å™¨è‹±æ–‡å…¨ç§°ä¸ºProxy Serverï¼Œå…¶åŠŸèƒ½å°±æ˜¯ä»£ç†ç½‘ç»œç”¨æˆ·å»å–å¾—ç½‘ç»œä¿¡æ¯ã€‚æˆ‘ä»¬å¯ä»¥é…ç½®è®¡ç®—æœºé€šè¿‡Webä»£ç†æœåŠ¡å™¨è®¿é—®Webç«™ç‚¹ï¼Œè€Œä¸ç›´æ¥è®¿é—®ç½‘ç«™ã€‚ ä½¿ç”¨ä»£ç†æœåŠ¡å™¨çš„åœºæ™¯ï¼šï¼ˆ1ï¼‰ä½¿ç”¨ä»£ç†æœåŠ¡å™¨ï¼Œç»•è¿‡é˜²ç«å¢™å°é”ã€‚å›½å†…ä¸å…è®¸ç½‘æ°‘è®¿é—®å›½å¤–çš„éæ³•ç½‘ç«™ï¼Œåœ¨æˆ‘å›½çš„é˜²ç«å¢™ä¸Šè®¾ç½®äº†æ‹¦æˆªåˆ°è¿™äº›ç½‘ç«™çš„æµé‡ã€‚ä½†æ˜¯å›½å¤–æœ‰å¾ˆå¤šçš„webä»£ç†æœåŠ¡å™¨ï¼Œå›½å†…ç”¨æˆ·å¯ä»¥è®¾ç½®æµè§ˆå™¨ä½¿ç”¨å›½å¤–çš„ä»£ç†å•†æœåŠ¡å™¨ï¼Œç„¶åè®¿é—®éæ³•ç½‘ç«™ï¼Œå°±èƒ½æˆåŠŸã€‚ç°åœ¨æœ‰å¾ˆå¤šâ€œç¿»å¢™â€è½¯ä»¶ï¼Œå…¶å®è´¨å°±æ˜¯ä½¿ç”¨å›½å¤–ä»£ç†æœåŠ¡å™¨ç»•è¿‡å›½å†…å°é”ï¼Œæ•…ç§°ä¸ºâ€œç¿»å¢™â€ã€‚ï¼ˆ2ï¼‰æé«˜è®¿é—®é€Ÿåº¦é€šå¸¸ä»£ç†æœåŠ¡å™¨å¯ä»¥ç¼“å­˜ç”¨æˆ·è®¿é—®è¿‡çš„å†…å®¹ï¼Œå½“å…¶ä»–ç”¨æˆ·å†è®¿é—®ç›¸åŒçš„URLæ—¶ï¼Œç”±ä»£ç†æœåŠ¡å™¨ç›´æ¥ä»ç¼“å­˜ä¸­æ‰¾åˆ°è¦è®¿é—®çš„ä¿¡æ¯ï¼Œä¼ ç»™ç”¨æˆ·ï¼Œå·²æé«˜è®¿é—®é€Ÿåº¦ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¼ä¸šå†…ç½‘éƒ¨ç½²ä¸€ä¸ªWebä»£ç†æœåŠ¡å™¨ï¼Œèƒ½èŠ‚çœä¸Šç½‘å¸¦å®½ã€‚ï¼ˆ3ï¼‰éšè—çœŸå®IPä¸Šç½‘è€…ä¹Ÿå¯ä»¥é€šè¿‡è¿™ç§æ–¹æ³•éšè—è‡ªå·±çš„IPã€‚æœ‰äº›ç½‘ç«™çš„è®ºå›ä¼šè®°å½•å‘å¸–äººçš„IPåœ°å€ã€‚å¦‚æœä½ ä¸æ‰“ç®—è®©è®ºå›è®°å½•ä½ çœŸæ˜¯çš„IPåœ°å€ï¼Œå°±å¯ä»¥ä½¿ç”¨ä»£ç†æœåŠ¡å™¨è®¿é—®è¯¥ç½‘ç«™ï¼Œå‘å¸–ï¼Œè¿™æ ·åªä¼šè®°å½•ä¸‹ä»£ç†çš„åœ°å€ï¼Œä»è€Œéšè—è‡ªå·±çš„IPåœ°å€ã€‚ å›½å†…å¤–æœ‰å¾ˆå¤šå…è´¹çš„ä»£ç†æœåŠ¡å™¨ï¼Œä¾‹å¦‚è¥¿åˆºå…è´¹ä»£ç†ã€‚ä¸Šé¢å¯ä»¥çœ‹åˆ°å…è´¹çš„ä»£ç†æœåŠ¡å™¨ï¼Œåœ¨æµè§ˆå™¨ä¸­è®¾ç½®ä½¿ç”¨è¿™äº›ä»£ç†æœåŠ¡å™¨è®¿é—®Internetã€‚","categories":[{"name":"ç½‘ç»œåŸºç¡€","slug":"ç½‘ç»œåŸºç¡€","permalink":"http://yoursite.com/categories/ç½‘ç»œåŸºç¡€/"}],"tags":[{"name":"ç½‘ç»œåŸºç¡€","slug":"ç½‘ç»œåŸºç¡€","permalink":"http://yoursite.com/tags/ç½‘ç»œåŸºç¡€/"},{"name":"HTTP","slug":"HTTP","permalink":"http://yoursite.com/tags/HTTP/"},{"name":"è¶…æ–‡æœ¬åè®®","slug":"è¶…æ–‡æœ¬åè®®","permalink":"http://yoursite.com/tags/è¶…æ–‡æœ¬åè®®/"}]},{"title":"æ³¨å†Œä¸ç™»å½•","slug":"æ³¨å†Œä¸ç™»å½•","date":"2017-12-21T13:15:56.000Z","updated":"2017-12-30T12:24:12.991Z","comments":true,"path":"2017/12/21/æ³¨å†Œä¸ç™»å½•/","link":"","permalink":"http://yoursite.com/2017/12/21/æ³¨å†Œä¸ç™»å½•/","excerpt":"","text":"rails ä¸­çš„gem deviseæä¾›äº†æ³¨å†Œä¸ç™»å½•çš„åŠŸèƒ½ï¼Œç”¨èµ·æ¥æ¯”è¾ƒæ–¹ä¾¿ã€‚ä½†æ˜¯ä¸ºäº†è‡ªèº«ç¼–ç¨‹èƒ½åŠ›ï¼Œå†³å®šå­¦ä¹ å¦‚ä½•è‡ªå†™å‡ºæ³¨å†Œä¸ç™»å½•åŠŸèƒ½ã€‚ æ³¨å†ŒåŠŸèƒ½ç”¨æˆ·æ³¨å†Œå³åˆ›å»ºä¸€ä¸ªç”¨æˆ·ï¼Œè¿™æ—¶ä¼šç”¨åˆ°æˆ‘ä»¬æ‰€ç†ŸçŸ¥çš„CRUDã€‚ç†è§£èµ·æ¥å¾ˆå®¹æ˜“ï¼Œä½†æ˜¯åšèµ·æ¥å¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•ã€‚ é¦–å…ˆéœ€è¦ç”Ÿæˆuserçš„modelï¼Œå¹¶å¯¹å…¶å­—æ®µè¿›è¡Œçº¦æŸï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œä¼šæ˜¯nameä¸emailï¼Œä¾‹å¦‚nameä¸emailéƒ½ä¸ä¸ºç©ºã€é•¿åº¦ã€æ ¼å¼ï¼Œä¸ºé‚®ç®±åŠ ç´¢å¼•ç­‰ï¼ŒæŠŠè¿™äº›è®¾ç½®å¥½ä¹‹åï¼Œéœ€è¦è®¾ç½®è·¯ç”±ï¼Œæ§åˆ¶å™¨ï¼Œè¿˜æœ‰è§†å›¾ã€‚ Modelçº¦æŸå­—æ®µã€‚ä¾‹å¦‚nameä¸emailçš„é•¿åº¦ã€æ ¼å¼ã€ä¸ä¸ºç©ºï¼Œå¯†ç é•¿åº¦ç­‰ï¼Œä¸”ä¸ºé‚®ç®±åŠ ç´¢å¼•ã€‚ routes.rbè®¾ç½®æ³¨å†Œè·¯ç”±ï¼Œä¸€èˆ¬ä¼šæ˜¯get &#39;/signup&#39;, to: &#39;users#new&#39; post &#39;/signup&#39;, to: &#39;users#create&#39; Viewsè®¾ç½®æ³¨å†Œè¡¨å•ã€‚å…¶ä¸­ä¼šç”¨åˆ°form_foræˆ–è€… simple_form_for Controllersç¼–å†™users#newä¸ users#create éªŒè¯ç”¨æˆ·éªŒè¯ç”¨æˆ·ä¼šç”¨å¯†ç ï¼Œå› ä¸ºæˆ‘ä»¬ä¼šä¸ºuserå¢åŠ ä¸€ä¸ªå­—æ®µåç§°password_digestï¼Œåœ¨userçš„modelä¸­ï¼Œæ·»åŠ has_secure_passwordè¿™ä¸ªæ–¹æ³•ï¼ˆå› ä¸ºhas_secure_passwordè¿™ä¸ªæ–¹æ³•è°ƒç”¨å”¯ä¸€è¦æ±‚å°±æ˜¯å¯¹åº”çš„modelä¸­æœ‰password_digest å­—æ®µï¼‰ï¼Œå®ƒæœ‰ä¸‰ä¸ªä½œç”¨: (1) åœ¨æ•°æ®åº“å±‚ä¸­çš„password_digestä¸­å­˜å‚¨å®‰å…¨çš„å¯†ç å“ˆå¸Œå€¼ï¼ˆ2ï¼‰è·å¾—ä¸€å¯¹è™šæ‹Ÿå±æ€§ï¼Œpassword password_confirmation,è€Œä¸”åˆ›å»ºå¯¹è±¡æ—¶ä¼šæ‰§è¡Œå­˜åœ¨æ€§éªŒè¯å’ŒåŒ¹é…éªŒè¯ï¼ˆ3ï¼‰è·å¾—authenticateæ–¹æ³•ï¼Œå¦‚æœå¯†ç æ­£ç¡®ï¼Œè¿”å›ç”¨æˆ·å¯¹è±¡ï¼Œå¦‚æœå¯†ç é”™è¯¯ï¼Œè¿”å›falseã€‚ è¦æƒ³ç”Ÿæˆä¸å¯é€†çš„å¯†ç å“ˆå¸Œå€¼ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°gem &#39;bcrypt&#39;,å®ƒçš„ä½œç”¨å°±æ˜¯ç”Ÿæˆå“ˆå¸Œå¯†ç å€¼ã€‚è¿™æ ·å³ä½¿â€˜è„±åº“â€™ï¼Œç”¨æˆ·çš„çœŸå®å¯†ç ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚","categories":[{"name":"Ruby","slug":"Ruby","permalink":"http://yoursite.com/categories/Ruby/"}],"tags":[{"name":"Ruby","slug":"Ruby","permalink":"http://yoursite.com/tags/Ruby/"},{"name":"ç”¨æˆ·ç³»ç»Ÿ","slug":"ç”¨æˆ·ç³»ç»Ÿ","permalink":"http://yoursite.com/tags/ç”¨æˆ·ç³»ç»Ÿ/"}]},{"title":"éƒ¨åˆ†gemæ€»ç»“","slug":"éƒ¨åˆ†gemæ€»ç»“","date":"2017-09-06T17:54:55.000Z","updated":"2018-01-02T15:14:07.363Z","comments":true,"path":"2017/09/07/éƒ¨åˆ†gemæ€»ç»“/","link":"","permalink":"http://yoursite.com/2017/09/07/éƒ¨åˆ†gemæ€»ç»“/","excerpt":"","text":"1.gem â€˜deviseâ€™ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” ç™»å½•ç³»ç»Ÿ å®‰è£…é¡»çŸ¥ï¼š ä¾æ¬¡æ‰§è¡Œbundle install rails g devise:install rails g devise user rake db:migrateï¼Œæœ€åé‡æ–°rails sã€‚ 2.gem â€˜bootstrapâ€™ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” å‰ç«¯å¼€å‘å¥—ä»¶ å®‰è£…é¡»çŸ¥ï¼š(1) ä¾æ¬¡æ‰§è¡Œbundle install mv app/assets/stylesheets/application.css app/assets/stylesheets/application.scss;(2) app/assets/stylesheets/application.scss123+@import \"bootstrap-sprockets\";+@import \"bootstrap\"; æœ€åé‡æ–°rails s 3.gem â€˜simple_formâ€™ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” ç®€åŒ–è¡¨å• å®‰è£…é¡»çŸ¥ï¼š ä¾æ¬¡æ‰§è¡Œbundle install rails g simple_form:install --bootstrap,æœ€åé‡æ–°rails s 4.gem â€˜font-awesome-railsâ€™ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” å›¾æ ‡å¥—ä»¶ å®‰è£…é¡»çŸ¥ ï¼ˆ1ï¼‰bundle install ,é‡æ–°rails sï¼ˆ2ï¼‰ app/assets/stylesheets/application.scss1@import \"font-awesome\"; 5.gem â€˜better_errorsâ€™ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” æ›´å¥½çš„æ˜¾ç¤ºé”™è¯¯è®¯æ¯ å®‰è£…é¡»çŸ¥ bundle install é‡å¯rails s 6.gem â€˜annotateâ€™ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” åœ¨ä¸»è¦ç”¨äºmodelä¸­æ˜¾ç¤ºæ ä½ å®‰è£…é¡»çŸ¥ bundle install é‡å¯rails sæ‰§è¡Œannotate --exclude tests,fixtures,factories,serializers,psï¼šæ¯æ¬¡æ–°å¢æ ä½åï¼Œéƒ½è¦æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼Œæ‰ä¼šåœ¨å…·ä½“modelé‡Œæ˜¾ç¤ºå‡ºæ‰€æœ‰å»ºç«‹çš„æ ä½æç¤ºã€‚ 7.gem â€˜awesome_rails_consoleâ€™ â€”â€”â€”â€”â€”â€”â€”â€”â€”- è®©â€œé‡‘æ‰‹æŒ‡â€å˜å¥½çœ‹çš„å¥—ä»¶ å®‰è£…é¡»çŸ¥ bundle install é‡å¯rails s 8.gem â€˜carrier_waveâ€™ gem â€˜mini_magickâ€™ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” ç”¨äºä¸Šä¼ å›¾ç‰‡ï¼ˆå¯èƒ½è¿˜æœ‰å…¶ä»–çš„åŠŸèƒ½ï¼‰ å®‰è£…é¡»çŸ¥ ä¾æ¬¡æ‰§è¡Œï¼šbundle install rails g uploader image é‡å¯rails s","categories":[{"name":"Ruby","slug":"Ruby","permalink":"http://yoursite.com/categories/Ruby/"}],"tags":[{"name":"Ruby","slug":"Ruby","permalink":"http://yoursite.com/tags/Ruby/"},{"name":"Gem","slug":"Gem","permalink":"http://yoursite.com/tags/Gem/"}]},{"title":"ä¸¤ç§æ–¹æ³•å®ç°æ”¶è—æˆ–è€…ç‚¹èµåŠŸèƒ½","slug":"ä¸¤ç§æ–¹æ³•å®ç°æ”¶è—æˆ–è€…ç‚¹èµåŠŸèƒ½","date":"2017-09-06T16:30:24.000Z","updated":"2018-01-02T14:24:18.694Z","comments":true,"path":"2017/09/07/ä¸¤ç§æ–¹æ³•å®ç°æ”¶è—æˆ–è€…ç‚¹èµåŠŸèƒ½/","link":"","permalink":"http://yoursite.com/2017/09/07/ä¸¤ç§æ–¹æ³•å®ç°æ”¶è—æˆ–è€…ç‚¹èµåŠŸèƒ½/","excerpt":"","text":"æ”¶è—åŠŸèƒ½ä¸ç‚¹èµåŠŸèƒ½çš„å®ä½œååˆ†ç±»ä¼¼ï¼Œæœ¬æ–‡ä»¥è´­ç‰©è½¦æ•™ç¨‹å®ä½œæ”¶è—åŠŸèƒ½ä¸ºä¾‹ã€‚ æ–¹æ³•ä¸€ï¼šstep1ä¸€ä¸ªç”¨æˆ·å¯ä»¥æ”¶è—å¤šä¸ªå•†å“ï¼Œä¸€ä¸ªå•†å“å¯ä»¥è¢«æ”¶è—å¾ˆå¤šæ¬¡ï¼Œå› æ­¤è¿™æ˜¯å¤šå¯¹å¤šçš„å…³ç³»ã€‚å› æ­¤éœ€è¦æ–°å¢ä¸€ä¸ªmodelï¼Œæ¥å½“åšproductä¸suerçš„æ¡¥æ¢ã€‚$ rails g model collect user_id:integer product_id:integer,ç„¶åæ‰§è¡Œ rake db:migrateï¼Œç„¶åä¸ºcollectã€userä¸productè¿™ä¸‰ä¸ªmodelåŠ ä¸Šå…³è”ã€‚ app/models/collect.rb123456789 + belongs_to :user + belongs_to :product``` ``` ruby app/models/product.rb + has_many :collects + has_many :collected_users, through: :collects, source: :user app/models/user.rb1234567891011121314151617181920 + has_many :collects + has_many :collected_products, through: :collects, source: :product #åŠ ä¸Šæ˜¯å¦æ”¶è—å•†å“çš„åˆ¤å®š + def is_collect_of?(product) + collected_products.include?(product) + end``` #### step2é¦–å…ˆä¿®æ”¹è·¯ç”±ä¿¡æ¯ï¼š``` ruby config/routes.rb + resources :product do + member do + post :collect + post :uncollect + end + end åœ¨controlleré‡ŒåŠ ä¸Šå¯¹åº”çš„methodï¼Œ app/controllers/product_controllers.rb1234567891011121314+ def collect + @product = Product.find(params[:id]) + current_user.collected_products &lt;&lt; @product + flash[:notice] = \"æˆåŠŸæ”¶è—å•†å“\" + redirect_to :back+ end+ def uncollect + @product = Product.find(params[:id]) + currrent_user.collected_products.delete(@product) + flash[:warning] = \"æ‚¨å·²å–æ¶ˆæ”¶è—è¯¥å•†å“\" + redirect_to :back+ end step3åœ¨viewsä¸­çš„ç›¸åº”ä½ç½®åŠ å…¥æ”¶è—çš„æ˜¾ç¤º app/views/products/show.html.erb123456+ &lt;% if current_user &amp;&amp; current_user.is_collect_of?(@product) %&gt;+ &lt;%= link_to(â€œå–æ¶ˆæ”¶è—â€, uncollect_product_path(@product), :method =&gt; :post, class: \"btn btn-danger btn-lg\" )%&gt;+ &lt;% else %&gt;+ &lt;%= link_to(\"æ”¶è—â€œ, collect_product_path(@product), :method =&gt; :post, class: \"btn btn-danger btn-lg\" )%&gt;+ &lt;% end %&gt; æ–¹æ³•äºŒstep1åŒæ ·ï¼Œç»ˆç«¯æ‰§è¡Œ rails g model colloect, ç¼–è¾‘ db/migrate/XXXXXXXX_create_collects.rbdb/migrate/XXXXXXXX_create_collects.rb 123456789 class CreateCollects &lt; ActiveRecord::Migration[5.0] def change create_table :collects do |t|+ t.integer :user_id, :index =&gt; true+ t.integer :product_id, :index =&gt; true t.timestamps end end end ä¹‹åæ‰§è¡Œ rake db:migrate ç¼–è¾‘app/models/collect.rb,åŠ ä¸Šå…³è”app/models/collect.rb12+ belongs_to :user+ belongs_to :product ç¼–è¾‘ app/models/product.rb,åŠ ä¸Šå…³è”app/models/product.rb123456789101112 + has_many :collects, :dependent =&gt; :destroy + had_many :collected_users, through: :collects, source: :user + def find_collect(user) + self.collects.where( :user_id =&gt; user.id).first + end``` ç¼–è¾‘ `app/model/user.rb`,åŠ ä¸Šå…³è”``` ruby app/models/user.rb + has_many :collects, :dependent =&gt; :destroy + has_many :collected_products, through: :collects, source: :product step2ç¼–è¾‘è·¯ç”±ä¿¡æ¯config/routes.rb123456+ resource :products do+ member do+ post :collect+ post :uncollect+ end+ end åœ¨controllerä¸­æ·»åŠ ï¼šapp/controllers/product_controller.rb12345678910111213141516+ def collect + @product = Product.find(params[:id]) + unless @product.find_collect(cuurent_user) + Collect.create( :user =&gt; current_user, :product =&gt; @product) + flash[:notice] = \"æ‚¨å·²æˆåŠŸæ”¶è—è¯¥å•†å“\" + end + redirect_to :back+ end+ def uncollect + @product = Product.find(params[:id]) + collect = @product.find_collect(current_user) + collect.destroy + flash[:warning] = \"æ‚¨å·²å–æ¶ˆæ”¶è—è¯¥å•†å“\" + redirect_to :back+ end Step3æœ€åä¸€æ­©ï¼Œå°±æ˜¯è¦åœ¨ app/views/products/show.html.erbä¸­åŠ ä¸Šæ”¶è—çš„æŒ‰é’® app/views/products/show.html.erb123456789â€¦â€¦ç•¥ + &lt;% if current_user %&gt; + &lt;% if @product.find_collect(current_user)%&gt; + &lt;% =link_to(\"å–æ¶ˆæ”¶è—\", uncollect_product_path(@product), :method =&gt; :post, class: \"btn btn-danger btn-lg\")%&gt; + &lt;% else %&gt; + &lt;%= link_to(\"æ”¶è—\", collect_product_path(@product), :method =&gt; :post, class: \"btn btn-primary btn-lg\")%&gt; + &lt;% end %&gt; + &lt;% end %&gt;â€¦â€¦ç•¥ æˆæœå±•ç¤º","categories":[{"name":"Ruby","slug":"Ruby","permalink":"http://yoursite.com/categories/Ruby/"}],"tags":[{"name":"Ruby","slug":"Ruby","permalink":"http://yoursite.com/tags/Ruby/"}]},{"title":"åˆ©ç”¨ransackåšæœç´¢åŠŸèƒ½","slug":"åˆ©ç”¨ransackåšæœç´¢åŠŸèƒ½","date":"2017-09-06T16:27:42.000Z","updated":"2017-12-30T15:30:27.831Z","comments":true,"path":"2017/09/07/åˆ©ç”¨ransackåšæœç´¢åŠŸèƒ½/","link":"","permalink":"http://yoursite.com/2017/09/07/åˆ©ç”¨ransackåšæœç´¢åŠŸèƒ½/","excerpt":"","text":"æœ¬ç¯‡æ•™ç¨‹åŸºäºè‡ªå·±çš„ä¸€ä¸ªå°é¡¹ç›®ï¼Œç”¨æˆ·å¯ä»¥æœç´¢ç½‘ç«™ä¸Šå…¶ä»–ç”¨æˆ·å‘è¡¨è¿‡çš„æ–‡ç« ã€‚ ç¬¬ä¸€æ­©ï¼šå®‰è£…gem ransack ransackä¼šç”¨æ•°æ®åº“çš„LIKEè¯­æ³•æ¥åšæœå¯»ï¼Œè™½ç„¶æ¯”è¾ƒæ–¹ä¾¿ï¼Œä½†å®ƒä¼šä¾æ¬¡æ£€æŸ¥èµ„æ–™æ˜¯å¦ç¬¦åˆï¼Œè€Œä¸ä¼šä½¿ç”¨æ•°æ®åº“çš„ç´¢å¼•ã€‚å¦‚æœæ•°æ®æ¯”è¾ƒåºå¤§çš„è¯ï¼Œåˆ©ç”¨ransackå°†ä¸ä¼šæ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©ã€‚è¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥å®‰è£…ä¸“é—¨çš„å…¨æ–‡æœç´¢å¼•æ“ï¼Œä¾‹å¦‚Elasticsearch Gemfile1+ gem 'ransack' $ bundleï¼Œé‡å¯ rails s ç¬¬äºŒæ­©controllerä¸configçš„è®¾å®š 1ã€è®¾ç½®è·¯ç”±config/routes.rb1234567891011121314151617181920212223242526272829303132333435 Rails.application.routes.draw do devise_for :users resources :posts do + collection do #æˆ‘ä»¬ä¼šæœç´¢å‡ºæ‰€æœ‰ç¬¦åˆå…³é”®å­—çš„æ–‡ç« ï¼Œç»“æœä¸ºå¤æ•°ï¼Œå› æ­¤ç”¨collectionï¼Œè€Œä¸æ˜¯member + get :search + end end end ``` #### 2ã€è®¾ç½®controllerä¸»è¦è®¾ç½®é€šè¿‡å“ªäº›å…³é”®è¯è¿›è¡Œæœç´¢ã€‚```ruby app/controllers/posts_controller.rb class PostsController &lt; ApplicationController before_action :validate_search_key, only: [:search] def search if @query_string.present? @posts = search_params #æœç´¢postçš„å…³é”®è¯ end end protected # æ”¾åœ¨æœ€å def validate_search_key # gsub æ˜¯Rubyä¸­æ­£åˆ™è¡¨è¾¾å¼çš„æ–¹æ³•ï¼Œå®ƒä¼šåˆ‡æ¢æ‰€æœ‰åŒ¹é…åˆ°çš„éƒ¨åˆ† @query_string = params[:q].gsub(/\\\\|\\'|\\/|\\?/, \"\")if params[:q].present? end def search_params Post.ransack(&#123;:title_or_content_cont =&gt; @query_string&#125;).result(distinct: true) #titleä¸contentæ˜¯postçš„ä¸¤ä¸ªæ ä½ï¼Œè€Œæˆ‘ä»¬çš„å…³é”®è¯å‡ºè‡ªè¿™é‡Œ end end ç¬¬ä¸‰æ­©viewsçš„è®¾å®š 1ã€å¯¼èˆªæ çš„æ˜¾ç¤ºapp/views/common/_navbar.html.erb12345678910 &lt;div class=\"collapse navbar-collapse\" id=\"bs-example-navbar-collapse-1\"&gt; + &lt;ul class=\"nav navbar-nav\"&gt; + &lt;li&gt; + &lt;div class=\"form-group form-inline search-bar\"&gt; + &lt;%= render :partial =&gt; \"posts/search_bar\"%&gt; + &lt;/div&gt; + &lt;/li&gt; + &lt;/ul&gt; â€¦â€¦ ç•¥&lt;/div&gt; æ‰§è¡Œ$ touch app/views/posts/_search_bar.html.erb,å¹¶ç¼–è¾‘app/views/posts/_search_bar.html.erb1234567891011121314 &lt;div class=\"row\"&gt; &lt;div class=\"col-sm-9 col-lg-8 col-lg-offset-2\"&gt; &lt;%= form_tag search_posts_path, :class =&gt; \"posts-search-form\", :method =&gt; :get do %&gt; &lt;div class=\"input-group\"&gt; &lt;input type=\"text\" class=\"form-control search-bar-input\" name=\"q\" value=\"&lt;%= params[:q] %&gt;\" placeholder=\"å…³é”®è¯\"&gt; &lt;span class=\"input-group-btn\"&gt; &lt;button type=\"submit\" class=\"btn btn-default search-bar-submit\"&gt; &lt;span class=\"glyphicon glyphicon-search\"&gt;&lt;/span&gt; &lt;/button&gt; &lt;/span&gt; &lt;/div&gt; &lt;% end %&gt; &lt;/div&gt;&lt;/div&gt; 2.æœç´¢åé¦ˆé¡µé¢æ–°å¢ app/views/posts/search.html.erbapp/views/posts/search.html.erb123456789101112131415161718192021222324252627282930313233&lt;div class=\"minHeight1000 bg-gray\"&gt; &lt;div class=\"search-page w1200 pt30 bc\"&gt; &lt;% if @posts.present? %&gt; &lt;h5 class=\"collection search-count\"&gt;å·²ä¸ºæ‚¨æ‰¾åˆ°&lt;%= @posts.count %&gt;ç¯‡ç›¸å…³æ–‡ç« &lt;/h5&gt; &lt;% else %&gt; &lt;p class=\"tc mt100\"&gt;æœªæœç´¢åˆ°ä»»ä½•æ–‡ç« ï¼Œè¦ä¸æ¢ä¸ªå…³é”®è¯è¯•è¯•ï¼Ÿ&lt;/p&gt; &lt;% end %&gt; &lt;/div&gt; &lt;div class=\"container\"&gt; &lt;% @posts.each do |post| %&gt; &lt;div class=\"panel panel-default\"&gt; &lt;div class=\"panel-body\"&gt; &lt;%= post.title %&gt; &lt;br/&gt; &lt;br/&gt; &lt;span id=\"psot-thumbsup-&lt;%= post.id%&gt;\" class=\" label label-success\"&gt;&lt;%= post.likes.count%&gt;ğŸ‘&lt;/span&gt; &lt;div class=\"text-right\"&gt; &lt;% if !current_user.is_collect_of?(post) %&gt; &lt;%= link_to(\"æ”¶è—\", collect_post_path(post), method: :post, class: \"btn btn-sm\") %&gt; &lt;% else %&gt; &lt;%= link_to(\"å–æ¶ˆæ”¶è—\", uncollect_post_path(post), method: :post, class: \"btn btn-sm\") %&gt; &lt;% end %&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;% end %&gt; &lt;/div&gt;&lt;/div&gt; æ•ˆæœå›¾","categories":[{"name":"Ruby","slug":"Ruby","permalink":"http://yoursite.com/categories/Ruby/"}],"tags":[{"name":"Ruby","slug":"Ruby","permalink":"http://yoursite.com/tags/Ruby/"},{"name":"ransack","slug":"ransack","permalink":"http://yoursite.com/tags/ransack/"}]},{"title":"Hello World","slug":"hello-world","date":"2017-09-06T09:33:31.000Z","updated":"2017-09-06T09:33:31.000Z","comments":true,"path":"2017/09/06/hello-world/","link":"","permalink":"http://yoursite.com/2017/09/06/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]}]}