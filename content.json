{"meta":{"title":"jonathan-fei.pro","subtitle":null,"description":"Stay hungry. Stay foolish.","author":"jonathan-fei","url":"http://yoursite.com"},"pages":[{"title":"categories","date":"2017-12-30T12:21:04.000Z","updated":"2017-12-30T12:21:51.399Z","comments":true,"path":"categories/index.html","permalink":"http://yoursite.com/categories/index.html","excerpt":"","text":""},{"title":"tags","date":"2017-12-30T12:23:01.000Z","updated":"2017-12-30T12:23:14.179Z","comments":true,"path":"tags/index.html","permalink":"http://yoursite.com/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"ç½‘ç»œåŸºç¡€-HTTP","slug":"ç½‘ç»œåŸºç¡€-HTTP","date":"2018-01-02T14:25:13.000Z","updated":"2018-01-02T14:38:56.968Z","comments":true,"path":"2018/01/02/ç½‘ç»œåŸºç¡€-HTTP/","link":"","permalink":"http://yoursite.com/2018/01/02/ç½‘ç»œåŸºç¡€-HTTP/","excerpt":"","text":"æœ€è¿‘Railsé¡¹ç›®éƒ¨ç½²çš„è¿‡ç¨‹ä¸­é‡åˆ°ç½‘ç»œç«¯å£çš„é—®é¢˜åŠç”¨åˆ°äº†httpç½‘ç»œåè®®çš„çŸ¥è¯†ï¼Œäºæ˜¯å†³å®šå¯¹è¿™å—çŸ¥è¯†è¿›è¡Œå›é¡¾å’Œé‡æ–°æ¢³ç†ï¼Œè¿™é‡Œæ¨èéŸ©ç«‹åˆšè€å¸ˆçš„ã€Šè®¡ç®—æœºç½‘ç»œåŸç†ã€‹ä¸€ä¹¦ï¼Œè®²çš„å¾ˆæ˜ç™½ã€‚ä»¥ä¸‹ä¸ºè¿™æ¬¡å­¦ä¹ åˆ°çš„ä¸»è¦å†…å®¹ï¼š HTTP( Hyper Text Transfer Protocol) WWW( World Wide Web),äº’è”ç½‘ä¸Šçš„ç½‘ç«™å…±åŒç»„æˆä¸‡ç»´ç½‘ã€‚ URL( Uniform Resource Locator)ï¼Œç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼Œç½‘ç«™çš„ç½‘å€ã€‚URLä¸€èˆ¬ç”±å››ä¸ªéƒ¨åˆ†ç»„æˆï¼š&lt;åè®®&gt;://&lt;ä¸»æœº&gt;:&lt;/ç«¯å£&gt;/&lt;è·¯å¾„&gt;ï¼Œä¾‹å¦‚http://106.14.190.181:80/wx ä¸€ HTTPåè®®ç‰ˆæœ¬ï¼š1- HTTP1.0è§„å®šæµè§ˆå™¨ä¸æœåŠ¡å™¨åªä¿æŒçŸ­æš‚çš„è¿æ¥ï¼Œæµè§ˆå™¨çš„æ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦ä¸æœåŠ¡å™¨å»ºç«‹ä¸€ä¸ªTCPè¿æ¥ï¼ŒæœåŠ¡å™¨å®Œæˆè¯·æ±‚å¤„ç†åç«‹å³æ–­å¼€TCPè¿æ¥ï¼Œæ—¢ä¸è·Ÿè¸ªæ¯ä¸ªå®¢æˆ·ä¹Ÿä¸è®°å½•è¿‡å»çš„è¯·æ±‚ã€‚ 2- HTTP1.1æ”¯æŒæŒç»­è¿æ¥ï¼Œå³æœåŠ¡å™¨åœ¨å‘é€å“åº”åï¼Œä»ç„¶åœ¨ä¸€æ®µæ—¶é—´å†…ä¿æŒè¿™æ¡TCPè¿æ¥ï¼Œä½¿å¾—åŒä¸€ä¸ªæµè§ˆå™¨å’Œè¯¥æœåŠ¡å™¨å¯ä»¥ç»§ç»­åœ¨è¿™æ¡è¿æ¥ä¸Šä¼ é€åç»­çš„HTTPè¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡ã€‚HTTP1.1çš„æŒç»­è¿æ¥æœ‰ä¸¤ç§å·¥ä½œæ–¹å¼ï¼Œå³éæµæ°´çº¿æ–¹å¼å’Œæµæ°´çº¿æ–¹å¼ã€‚éæµæ°´çº¿æ–¹å¼ï¼ˆç†è§£ä¸ºè¿…é›·ä¸€æ¬¡åªèƒ½ä¸‹è½½ä¸€ä¸ªæ–‡ä»¶ï¼‰çš„ç‰¹ç‚¹æ˜¯å®¢æˆ·åœ¨æ”¶åˆ°å‰ä¸€ä¸ªå“åº”åæ‰èƒ½å‘é€å†™ä¸€ä¸ªè¯·æ±‚ã€‚å› æ­¤ï¼Œåœ¨TCPè¿æ¥å»ºç«‹åï¼Œå®¢æˆ·æ¯è®¿é—®ä¸€æ¬¡å¯¹è±¡éƒ½è¦ç”¨å»ä¸€ä¸ªå¾€è¿”æ—¶é—´RTTï¼Œè¿™ç§æ–¹å¼æµªè´¹æœåŠ¡å™¨èµ„æºã€‚æµæ°´çº¿çš„ç‰¹ç‚¹ï¼ˆç†è§£ä¸ºè¿…é›·ä¸€æ¬¡å¯ä»¥ä¸‹è½½å¤šä¸ªæ–‡ä»¶ï¼‰æ˜¯å®¢æˆ·åœ¨æ”¶åˆ°HTTPå“åº”æŠ¥æ–‡ä¹‹å‰å°±èƒ½å¤Ÿå‘é€æ–°çš„è¯·æ±‚æŠ¥æ–‡ã€‚äºæ˜¯ä¸€ä¸ªæ¥ä¸€ä¸ªçš„è¯·æ±‚æŠ¥æ–‡åˆ°è¾¾æœåŠ¡å™¨åï¼ŒæœåŠ¡å™¨å°±å¯è¿ç»­å‘å›å“åº”æŠ¥æ–‡ï¼Œè¿™ç§æ–¹å¼ä½¿TCPè¿æ¥ä¸­çš„ç©ºé—²æ—¶é—´å‡å°‘ï¼Œæé«˜äº†æ–‡æ¡£çš„ä¸‹è½½æ•ˆç‡ã€‚ 3- HTTPè¯·æ±‚æŠ¥æ–‡ä¸å“åº”æŠ¥æ–‡ï¼ˆ1ï¼‰ è¯·æ±‚æŠ¥æ–‡ï¼šä»å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€è¯·æ±‚æŠ¥æ–‡ è¯·æ±‚æŠ¥æ–‡ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼šåˆ†åˆ«æ˜¯è¯·æ±‚è¡Œï¼Œé¦–éƒ¨è¡Œï¼Œå®ä½“ä¸»ä½“ã€‚è¯·æ±‚æŠ¥æ–‡çš„ç¬¬ä¸€è¡Œâ€œè¯·æ±‚è¡Œâ€åªæœ‰ä¸‰ä¸ªå†…å®¹ï¼Œå³æ–¹æ³•ã€è¯·æ±‚èµ„æºçš„URLï¼Œä»¥åŠHTTPçš„ç‰ˆæœ¬ã€‚æ–¹æ³•å°±æ˜¯å¯¹å¯¹è±¡çš„æ“ä½œï¼ŒHTTP1.1åè®®ä¸­å®šä¹‰äº†å…«ä¸­æ–¹æ³•ï¼Œæ¥è¡¨æ˜å¯¹Request-URLæŒ‡å®šèµ„æºçš„ä¸åŒæ“ä½œæ–¹å¼ï¼šGETã€POSTã€PUTã€DELETEã€HEADã€TRACEã€CONNECTã€OPPIONSï¼ˆ2ï¼‰å“åº”æŠ¥æ–‡ï¼šä»æœåŠ¡å™¨åˆ°è¾¾å®¢æˆ·ç«¯çš„åº”ç­” äºŒ CookieHTTPæ˜¯ä¸€ç§æ— çŠ¶æ€çš„åè®®ï¼Œå½“ä½ æ³¨å†Œç™»å½•ä¸€ä¸ªç½‘ç«™åï¼Œå½“ä¸‹æ¬¡å†æ‰“å¼€è¿™ä¸ªç½‘ç«™åï¼Œéœ€è¦å†æ¬¡è¾“å…¥è´¦å·ä¸å¯†ç è¿›è¡Œèº«ä»½éªŒè¯ï¼ŒæœåŠ¡å™¨ä»…ä»ç½‘ç»œè¿æ¥ä¸Šæ— ä»çŸ¥é“ä½ çš„æ›¾ç»ç™»å½•çš„èº«ä»½ã€‚å¦‚æœå¸Œæœ›æœåŠ¡å™¨è¯»å–ä½ çš„æ›¾ç»ç™»å½•çš„èº«ä»½ï¼Œé‚£å°±éœ€è¦åœ¨ç”¨æˆ·è¾“å…¥è´¦å·å’Œå¯†ç åï¼ŒæœåŠ¡å™¨åœ¨ç”¨æˆ·çš„è®¡ç®—æœºå­˜æ”¾ä¸€ä¸ªé€šè¡Œè¯ï¼Œæ¥è®°å½•ç”¨æˆ·çš„èº«ä»½å’ŒçŠ¶æ€ã€‚ä»¥åå†è®¿é—®ï¼Œç½‘ç«™ï¼ˆæœåŠ¡å™¨ï¼‰å°±ä¼šå…ˆè¯»å–å®¢æˆ·ç«¯çš„é€šè¡Œè¯ã€‚æœåŠ¡å™¨å­˜æ”¾åœ¨å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰çš„é€šè¡Œè¯é€šå¸¸è¢«ç§°ä¸ºcookieã€‚ cookieå®é™…ä¸Šæ˜¯ä¸€å°æ®µçš„æ–‡æœ¬ä¿¡æ¯ï¼ˆè¯´æ˜å¯ä»¥è¿›è¡Œæ‹·è´ï¼Œä¹Ÿå°±æ˜¯åœ¨å…¶ä»–æµè§ˆå™¨å¯¼å…¥cookieä¹‹åä¸ç”¨è¾“å…¥è´¦å·å’Œå¯†ç å°±å¯ä»¥ç™»å½•äº†ï¼‰ã€‚å®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡å™¨ï¼Œå¦‚æœæœåŠ¡å™¨éœ€è¦è®°å½•è¯¥ç”¨æˆ·çŠ¶æ€ï¼Œå°±ä½¿ç”¨responseå‘å®¢æˆ·ç«¯æµè§ˆå™¨é¢å‘ä¸€ä¸ªCookieï¼Œå®¢æˆ·ç«¯æŠŠæµè§ˆå™¨ä¼šæŠŠcookieä¿å­˜èµ·æ¥ã€‚å½“æµè§ˆå™¨å†è¯·æ±‚è¯¥ç½‘ç«™æ—¶ï¼Œæµè§ˆå™¨å§è¯·æ±‚çš„ç½‘å€è¿åŒè¯¥Cookieä¸€åŒæäº¤ç»™æœåŠ¡å™¨ã€‚æœåŠ¡å™¨æ£€æŸ¥è¯¥Cookieï¼Œä»¥æ­¤æ¥è¾¨è®¤ç”¨æˆ·èº«ä»½å’ŒçŠ¶æ€ã€‚æœåŠ¡å™¨è¿˜å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹cookieçš„å†…å®¹ã€‚ ä¸‰ é€šè¿‡ä»£ç†æœåŠ¡å™¨è®¿é—®ç½‘ç«™ä»£ç†æœåŠ¡å™¨è‹±æ–‡å…¨ç§°ä¸ºProxy Serverï¼Œå…¶åŠŸèƒ½å°±æ˜¯ä»£ç†ç½‘ç»œç”¨æˆ·å»å–å¾—ç½‘ç»œä¿¡æ¯ã€‚æˆ‘ä»¬å¯ä»¥é…ç½®è®¡ç®—æœºé€šè¿‡Webä»£ç†æœåŠ¡å™¨è®¿é—®Webç«™ç‚¹ï¼Œè€Œä¸ç›´æ¥è®¿é—®ç½‘ç«™ã€‚ ä½¿ç”¨ä»£ç†æœåŠ¡å™¨çš„åœºæ™¯ï¼š #####ï¼ˆ1ï¼‰ä½¿ç”¨ä»£ç†æœåŠ¡å™¨ï¼Œç»•è¿‡é˜²ç«å¢™å°é”ã€‚å›½å†…ä¸å…è®¸ç½‘æ°‘è®¿é—®å›½å¤–çš„éæ³•ç½‘ç«™ï¼Œåœ¨æˆ‘å›½çš„é˜²ç«å¢™ä¸Šè®¾ç½®äº†æ‹¦æˆªåˆ°è¿™äº›ç½‘ç«™çš„æµé‡ã€‚ä½†æ˜¯å›½å¤–æœ‰å¾ˆå¤šçš„webä»£ç†æœåŠ¡å™¨ï¼Œå›½å†…ç”¨æˆ·å¯ä»¥è®¾ç½®æµè§ˆå™¨ä½¿ç”¨å›½å¤–çš„ä»£ç†å•†æœåŠ¡å™¨ï¼Œç„¶åè®¿é—®éæ³•ç½‘ç«™ï¼Œå°±èƒ½æˆåŠŸã€‚ç°åœ¨æœ‰å¾ˆå¤šâ€œç¿»å¢™â€è½¯ä»¶ï¼Œå…¶å®è´¨å°±æ˜¯ä½¿ç”¨å›½å¤–ä»£ç†æœåŠ¡å™¨ç»•è¿‡å›½å†…å°é”ï¼Œæ•…ç§°ä¸ºâ€œç¿»å¢™â€ã€‚ #####ï¼ˆ2ï¼‰æé«˜è®¿é—®é€Ÿåº¦é€šå¸¸ä»£ç†æœåŠ¡å™¨å¯ä»¥ç¼“å­˜ç”¨æˆ·è®¿é—®è¿‡çš„å†…å®¹ï¼Œå½“å…¶ä»–ç”¨æˆ·å†è®¿é—®ç›¸åŒçš„URLæ—¶ï¼Œç”±ä»£ç†æœåŠ¡å™¨ç›´æ¥ä»ç¼“å­˜ä¸­æ‰¾åˆ°è¦è®¿é—®çš„ä¿¡æ¯ï¼Œä¼ ç»™ç”¨æˆ·ï¼Œå·²æé«˜è®¿é—®é€Ÿåº¦ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¼ä¸šå†…ç½‘éƒ¨ç½²ä¸€ä¸ªWebä»£ç†æœåŠ¡å™¨ï¼Œèƒ½èŠ‚çœä¸Šç½‘å¸¦å®½ã€‚ #####ï¼ˆ3ï¼‰éšè—çœŸå®IPä¸Šç½‘è€…ä¹Ÿå¯ä»¥é€šè¿‡è¿™ç§æ–¹æ³•éšè—è‡ªå·±çš„IPã€‚æœ‰äº›ç½‘ç«™çš„è®ºå›ä¼šè®°å½•å‘å¸–äººçš„IPåœ°å€ã€‚å¦‚æœä½ ä¸æ‰“ç®—è®©è®ºå›è®°å½•ä½ çœŸæ˜¯çš„IPåœ°å€ï¼Œå°±å¯ä»¥ä½¿ç”¨ä»£ç†æœåŠ¡å™¨è®¿é—®è¯¥ç½‘ç«™ï¼Œå‘å¸–ï¼Œè¿™æ ·åªä¼šè®°å½•ä¸‹ä»£ç†çš„åœ°å€ï¼Œä»è€Œéšè—è‡ªå·±çš„IPåœ°å€ã€‚ å›½å†…å¤–æœ‰å¾ˆå¤šå…è´¹çš„ä»£ç†æœåŠ¡å™¨ï¼Œä¾‹å¦‚è¥¿åˆºå…è´¹ä»£ç†ã€‚ä¸Šé¢å¯ä»¥çœ‹åˆ°å…è´¹çš„ä»£ç†æœåŠ¡å™¨ï¼Œåœ¨æµè§ˆå™¨ä¸­è®¾ç½®ä½¿ç”¨è¿™äº›ä»£ç†æœåŠ¡å™¨è®¿é—®Internetã€‚","categories":[],"tags":[]},{"title":"æ³¨å†Œä¸ç™»å½•","slug":"æ³¨å†Œä¸ç™»å½•","date":"2017-12-21T13:15:56.000Z","updated":"2017-12-30T12:24:12.991Z","comments":true,"path":"2017/12/21/æ³¨å†Œä¸ç™»å½•/","link":"","permalink":"http://yoursite.com/2017/12/21/æ³¨å†Œä¸ç™»å½•/","excerpt":"","text":"rails ä¸­çš„gem deviseæä¾›äº†æ³¨å†Œä¸ç™»å½•çš„åŠŸèƒ½ï¼Œç”¨èµ·æ¥æ¯”è¾ƒæ–¹ä¾¿ã€‚ä½†æ˜¯ä¸ºäº†è‡ªèº«ç¼–ç¨‹èƒ½åŠ›ï¼Œå†³å®šå­¦ä¹ å¦‚ä½•è‡ªå†™å‡ºæ³¨å†Œä¸ç™»å½•åŠŸèƒ½ã€‚ æ³¨å†ŒåŠŸèƒ½ç”¨æˆ·æ³¨å†Œå³åˆ›å»ºä¸€ä¸ªç”¨æˆ·ï¼Œè¿™æ—¶ä¼šç”¨åˆ°æˆ‘ä»¬æ‰€ç†ŸçŸ¥çš„CRUDã€‚ç†è§£èµ·æ¥å¾ˆå®¹æ˜“ï¼Œä½†æ˜¯åšèµ·æ¥å¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•ã€‚ é¦–å…ˆéœ€è¦ç”Ÿæˆuserçš„modelï¼Œå¹¶å¯¹å…¶å­—æ®µè¿›è¡Œçº¦æŸï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œä¼šæ˜¯nameä¸emailï¼Œä¾‹å¦‚nameä¸emailéƒ½ä¸ä¸ºç©ºã€é•¿åº¦ã€æ ¼å¼ï¼Œä¸ºé‚®ç®±åŠ ç´¢å¼•ç­‰ï¼ŒæŠŠè¿™äº›è®¾ç½®å¥½ä¹‹åï¼Œéœ€è¦è®¾ç½®è·¯ç”±ï¼Œæ§åˆ¶å™¨ï¼Œè¿˜æœ‰è§†å›¾ã€‚ Modelçº¦æŸå­—æ®µã€‚ä¾‹å¦‚nameä¸emailçš„é•¿åº¦ã€æ ¼å¼ã€ä¸ä¸ºç©ºï¼Œå¯†ç é•¿åº¦ç­‰ï¼Œä¸”ä¸ºé‚®ç®±åŠ ç´¢å¼•ã€‚ routes.rbè®¾ç½®æ³¨å†Œè·¯ç”±ï¼Œä¸€èˆ¬ä¼šæ˜¯get &#39;/signup&#39;, to: &#39;users#new&#39; post &#39;/signup&#39;, to: &#39;users#create&#39; Viewsè®¾ç½®æ³¨å†Œè¡¨å•ã€‚å…¶ä¸­ä¼šç”¨åˆ°form_foræˆ–è€… simple_form_for Controllersç¼–å†™users#newä¸ users#create éªŒè¯ç”¨æˆ·éªŒè¯ç”¨æˆ·ä¼šç”¨å¯†ç ï¼Œå› ä¸ºæˆ‘ä»¬ä¼šä¸ºuserå¢åŠ ä¸€ä¸ªå­—æ®µåç§°password_digestï¼Œåœ¨userçš„modelä¸­ï¼Œæ·»åŠ has_secure_passwordè¿™ä¸ªæ–¹æ³•ï¼ˆå› ä¸ºhas_secure_passwordè¿™ä¸ªæ–¹æ³•è°ƒç”¨å”¯ä¸€è¦æ±‚å°±æ˜¯å¯¹åº”çš„modelä¸­æœ‰password_digest å­—æ®µï¼‰ï¼Œå®ƒæœ‰ä¸‰ä¸ªä½œç”¨: (1) åœ¨æ•°æ®åº“å±‚ä¸­çš„password_digestä¸­å­˜å‚¨å®‰å…¨çš„å¯†ç å“ˆå¸Œå€¼ï¼ˆ2ï¼‰è·å¾—ä¸€å¯¹è™šæ‹Ÿå±æ€§ï¼Œpassword password_confirmation,è€Œä¸”åˆ›å»ºå¯¹è±¡æ—¶ä¼šæ‰§è¡Œå­˜åœ¨æ€§éªŒè¯å’ŒåŒ¹é…éªŒè¯ï¼ˆ3ï¼‰è·å¾—authenticateæ–¹æ³•ï¼Œå¦‚æœå¯†ç æ­£ç¡®ï¼Œè¿”å›ç”¨æˆ·å¯¹è±¡ï¼Œå¦‚æœå¯†ç é”™è¯¯ï¼Œè¿”å›falseã€‚ è¦æƒ³ç”Ÿæˆä¸å¯é€†çš„å¯†ç å“ˆå¸Œå€¼ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°gem &#39;bcrypt&#39;,å®ƒçš„ä½œç”¨å°±æ˜¯ç”Ÿæˆå“ˆå¸Œå¯†ç å€¼ã€‚è¿™æ ·å³ä½¿â€˜è„±åº“â€™ï¼Œç”¨æˆ·çš„çœŸå®å¯†ç ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚","categories":[{"name":"Ruby","slug":"Ruby","permalink":"http://yoursite.com/categories/Ruby/"}],"tags":[{"name":"Ruby","slug":"Ruby","permalink":"http://yoursite.com/tags/Ruby/"},{"name":"ç”¨æˆ·ç³»ç»Ÿ","slug":"ç”¨æˆ·ç³»ç»Ÿ","permalink":"http://yoursite.com/tags/ç”¨æˆ·ç³»ç»Ÿ/"}]},{"title":"éƒ¨åˆ†gemæ€»ç»“","slug":"éƒ¨åˆ†gemæ€»ç»“","date":"2017-09-06T17:54:55.000Z","updated":"2017-12-30T12:24:57.292Z","comments":true,"path":"2017/09/07/éƒ¨åˆ†gemæ€»ç»“/","link":"","permalink":"http://yoursite.com/2017/09/07/éƒ¨åˆ†gemæ€»ç»“/","excerpt":"","text":"1.gem â€˜deviseâ€™ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” ç™»å½•ç³»ç»Ÿ å®‰è£…é¡»çŸ¥ï¼š ä¾æ¬¡æ‰§è¡Œbundle install rails g devise:install rails g devise user rake db:migrateï¼Œæœ€åé‡æ–°rails sã€‚ 2.gem â€˜bootstrapâ€™ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” å‰ç«¯å¼€å‘å¥—ä»¶ å®‰è£…é¡»çŸ¥ï¼š(1) ä¾æ¬¡æ‰§è¡Œbundle install mv app/assets/stylesheets/application.css app/assets/stylesheets/application.scss;(2) app/assets/stylesheets/application.scss123+@import \"bootstrap-sprockets\";+@import \"bootstrap\"; æœ€åé‡æ–°rails s 3.gem â€˜simple_formâ€™ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” ç®€åŒ–è¡¨å• å®‰è£…é¡»çŸ¥ï¼š ä¾æ¬¡æ‰§è¡Œbundle install rails g simple_form:install --bootstrap,æœ€åé‡æ–°rails s 4.gem â€˜font-awesome-railsâ€™ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” å›¾æ ‡å¥—ä»¶ å®‰è£…é¡»çŸ¥ ï¼ˆ1ï¼‰bundle install ,é‡æ–°rails sï¼ˆ2ï¼‰ app/assets/stylesheets/application.scss1@import \"font-awesome\"; 5.gem â€˜better_errorsâ€™ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” æ›´å¥½çš„æ˜¾ç¤ºé”™è¯¯è®¯æ¯ å®‰è£…é¡»çŸ¥ bundle install é‡å¯rails s 6.gem â€˜annotateâ€™ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” åœ¨ä¸»è¦ç”¨äºmodelä¸­æ˜¾ç¤ºæ ä½ å®‰è£…é¡»çŸ¥ bundle install é‡å¯rails sæ‰§è¡Œannotate --exclude tests,fixtures,factories,serializers,psï¼šæ¯æ¬¡æ–°å¢æ ä½åï¼Œéƒ½è¦æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼Œæ‰ä¼šåœ¨å…·ä½“modelé‡Œæ˜¾ç¤ºå‡ºæ‰€æœ‰å»ºç«‹çš„æ ä½æç¤ºã€‚ 7.gem â€˜awesome_rails_consoleâ€™ â€”â€”â€”â€”â€”â€”â€”â€”â€”- è®©â€œé‡‘æ‰‹æŒ‡â€å˜å¥½çœ‹çš„å¥—ä»¶ å®‰è£…é¡»çŸ¥ bundle install é‡å¯rails s 8.gem â€˜carrier_waveâ€™ gem â€˜mini_magickâ€™ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” ç”¨äºä¸Šä¼ å›¾ç‰‡ï¼ˆå¯èƒ½è¿˜æœ‰å…¶ä»–çš„åŠŸèƒ½ï¼‰ å®‰è£…é¡»çŸ¥ ä¾æ¬¡æ‰§è¡Œï¼šbundle install rails g uploader image é‡å¯rails s","categories":[{"name":"Ruby","slug":"Ruby","permalink":"http://yoursite.com/categories/Ruby/"}],"tags":[{"name":"Ruby","slug":"Ruby","permalink":"http://yoursite.com/tags/Ruby/"},{"name":"Gem","slug":"Gem","permalink":"http://yoursite.com/tags/Gem/"}]},{"title":"ä¸¤ç§æ–¹æ³•å®ç°æ”¶è—æˆ–è€…ç‚¹èµåŠŸèƒ½","slug":"ä¸¤ç§æ–¹æ³•å®ç°æ”¶è—æˆ–è€…ç‚¹èµåŠŸèƒ½","date":"2017-09-06T16:30:24.000Z","updated":"2018-01-02T14:24:18.694Z","comments":true,"path":"2017/09/07/ä¸¤ç§æ–¹æ³•å®ç°æ”¶è—æˆ–è€…ç‚¹èµåŠŸèƒ½/","link":"","permalink":"http://yoursite.com/2017/09/07/ä¸¤ç§æ–¹æ³•å®ç°æ”¶è—æˆ–è€…ç‚¹èµåŠŸèƒ½/","excerpt":"","text":"æ”¶è—åŠŸèƒ½ä¸ç‚¹èµåŠŸèƒ½çš„å®ä½œååˆ†ç±»ä¼¼ï¼Œæœ¬æ–‡ä»¥è´­ç‰©è½¦æ•™ç¨‹å®ä½œæ”¶è—åŠŸèƒ½ä¸ºä¾‹ã€‚ æ–¹æ³•ä¸€ï¼šstep1ä¸€ä¸ªç”¨æˆ·å¯ä»¥æ”¶è—å¤šä¸ªå•†å“ï¼Œä¸€ä¸ªå•†å“å¯ä»¥è¢«æ”¶è—å¾ˆå¤šæ¬¡ï¼Œå› æ­¤è¿™æ˜¯å¤šå¯¹å¤šçš„å…³ç³»ã€‚å› æ­¤éœ€è¦æ–°å¢ä¸€ä¸ªmodelï¼Œæ¥å½“åšproductä¸suerçš„æ¡¥æ¢ã€‚$ rails g model collect user_id:integer product_id:integer,ç„¶åæ‰§è¡Œ rake db:migrateï¼Œç„¶åä¸ºcollectã€userä¸productè¿™ä¸‰ä¸ªmodelåŠ ä¸Šå…³è”ã€‚ app/models/collect.rb123456789 + belongs_to :user + belongs_to :product``` ``` ruby app/models/product.rb + has_many :collects + has_many :collected_users, through: :collects, source: :user app/models/user.rb1234567891011121314151617181920 + has_many :collects + has_many :collected_products, through: :collects, source: :product #åŠ ä¸Šæ˜¯å¦æ”¶è—å•†å“çš„åˆ¤å®š + def is_collect_of?(product) + collected_products.include?(product) + end``` #### step2é¦–å…ˆä¿®æ”¹è·¯ç”±ä¿¡æ¯ï¼š``` ruby config/routes.rb + resources :product do + member do + post :collect + post :uncollect + end + end åœ¨controlleré‡ŒåŠ ä¸Šå¯¹åº”çš„methodï¼Œ app/controllers/product_controllers.rb1234567891011121314+ def collect + @product = Product.find(params[:id]) + current_user.collected_products &lt;&lt; @product + flash[:notice] = \"æˆåŠŸæ”¶è—å•†å“\" + redirect_to :back+ end+ def uncollect + @product = Product.find(params[:id]) + currrent_user.collected_products.delete(@product) + flash[:warning] = \"æ‚¨å·²å–æ¶ˆæ”¶è—è¯¥å•†å“\" + redirect_to :back+ end step3åœ¨viewsä¸­çš„ç›¸åº”ä½ç½®åŠ å…¥æ”¶è—çš„æ˜¾ç¤º app/views/products/show.html.erb123456+ &lt;% if current_user &amp;&amp; current_user.is_collect_of?(@product) %&gt;+ &lt;%= link_to(â€œå–æ¶ˆæ”¶è—â€, uncollect_product_path(@product), :method =&gt; :post, class: \"btn btn-danger btn-lg\" )%&gt;+ &lt;% else %&gt;+ &lt;%= link_to(\"æ”¶è—â€œ, collect_product_path(@product), :method =&gt; :post, class: \"btn btn-danger btn-lg\" )%&gt;+ &lt;% end %&gt; æ–¹æ³•äºŒstep1åŒæ ·ï¼Œç»ˆç«¯æ‰§è¡Œ rails g model colloect, ç¼–è¾‘ db/migrate/XXXXXXXX_create_collects.rbdb/migrate/XXXXXXXX_create_collects.rb 123456789 class CreateCollects &lt; ActiveRecord::Migration[5.0] def change create_table :collects do |t|+ t.integer :user_id, :index =&gt; true+ t.integer :product_id, :index =&gt; true t.timestamps end end end ä¹‹åæ‰§è¡Œ rake db:migrate ç¼–è¾‘app/models/collect.rb,åŠ ä¸Šå…³è”app/models/collect.rb12+ belongs_to :user+ belongs_to :product ç¼–è¾‘ app/models/product.rb,åŠ ä¸Šå…³è”app/models/product.rb123456789101112 + has_many :collects, :dependent =&gt; :destroy + had_many :collected_users, through: :collects, source: :user + def find_collect(user) + self.collects.where( :user_id =&gt; user.id).first + end``` ç¼–è¾‘ `app/model/user.rb`,åŠ ä¸Šå…³è”``` ruby app/models/user.rb + has_many :collects, :dependent =&gt; :destroy + has_many :collected_products, through: :collects, source: :product step2ç¼–è¾‘è·¯ç”±ä¿¡æ¯config/routes.rb123456+ resource :products do+ member do+ post :collect+ post :uncollect+ end+ end åœ¨controllerä¸­æ·»åŠ ï¼šapp/controllers/product_controller.rb12345678910111213141516+ def collect + @product = Product.find(params[:id]) + unless @product.find_collect(cuurent_user) + Collect.create( :user =&gt; current_user, :product =&gt; @product) + flash[:notice] = \"æ‚¨å·²æˆåŠŸæ”¶è—è¯¥å•†å“\" + end + redirect_to :back+ end+ def uncollect + @product = Product.find(params[:id]) + collect = @product.find_collect(current_user) + collect.destroy + flash[:warning] = \"æ‚¨å·²å–æ¶ˆæ”¶è—è¯¥å•†å“\" + redirect_to :back+ end Step3æœ€åä¸€æ­©ï¼Œå°±æ˜¯è¦åœ¨ app/views/products/show.html.erbä¸­åŠ ä¸Šæ”¶è—çš„æŒ‰é’® app/views/products/show.html.erb123456789â€¦â€¦ç•¥ + &lt;% if current_user %&gt; + &lt;% if @product.find_collect(current_user)%&gt; + &lt;% =link_to(\"å–æ¶ˆæ”¶è—\", uncollect_product_path(@product), :method =&gt; :post, class: \"btn btn-danger btn-lg\")%&gt; + &lt;% else %&gt; + &lt;%= link_to(\"æ”¶è—\", collect_product_path(@product), :method =&gt; :post, class: \"btn btn-primary btn-lg\")%&gt; + &lt;% end %&gt; + &lt;% end %&gt;â€¦â€¦ç•¥ æˆæœå±•ç¤º","categories":[{"name":"Ruby","slug":"Ruby","permalink":"http://yoursite.com/categories/Ruby/"}],"tags":[{"name":"Ruby","slug":"Ruby","permalink":"http://yoursite.com/tags/Ruby/"}]},{"title":"åˆ©ç”¨ransackåšæœç´¢åŠŸèƒ½","slug":"åˆ©ç”¨ransackåšæœç´¢åŠŸèƒ½","date":"2017-09-06T16:27:42.000Z","updated":"2017-12-30T15:30:27.831Z","comments":true,"path":"2017/09/07/åˆ©ç”¨ransackåšæœç´¢åŠŸèƒ½/","link":"","permalink":"http://yoursite.com/2017/09/07/åˆ©ç”¨ransackåšæœç´¢åŠŸèƒ½/","excerpt":"","text":"æœ¬ç¯‡æ•™ç¨‹åŸºäºè‡ªå·±çš„ä¸€ä¸ªå°é¡¹ç›®ï¼Œç”¨æˆ·å¯ä»¥æœç´¢ç½‘ç«™ä¸Šå…¶ä»–ç”¨æˆ·å‘è¡¨è¿‡çš„æ–‡ç« ã€‚ ç¬¬ä¸€æ­©ï¼šå®‰è£…gem ransack ransackä¼šç”¨æ•°æ®åº“çš„LIKEè¯­æ³•æ¥åšæœå¯»ï¼Œè™½ç„¶æ¯”è¾ƒæ–¹ä¾¿ï¼Œä½†å®ƒä¼šä¾æ¬¡æ£€æŸ¥èµ„æ–™æ˜¯å¦ç¬¦åˆï¼Œè€Œä¸ä¼šä½¿ç”¨æ•°æ®åº“çš„ç´¢å¼•ã€‚å¦‚æœæ•°æ®æ¯”è¾ƒåºå¤§çš„è¯ï¼Œåˆ©ç”¨ransackå°†ä¸ä¼šæ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©ã€‚è¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥å®‰è£…ä¸“é—¨çš„å…¨æ–‡æœç´¢å¼•æ“ï¼Œä¾‹å¦‚Elasticsearch Gemfile1+ gem 'ransack' $ bundleï¼Œé‡å¯ rails s ç¬¬äºŒæ­©controllerä¸configçš„è®¾å®š 1ã€è®¾ç½®è·¯ç”±config/routes.rb1234567891011121314151617181920212223242526272829303132333435 Rails.application.routes.draw do devise_for :users resources :posts do + collection do #æˆ‘ä»¬ä¼šæœç´¢å‡ºæ‰€æœ‰ç¬¦åˆå…³é”®å­—çš„æ–‡ç« ï¼Œç»“æœä¸ºå¤æ•°ï¼Œå› æ­¤ç”¨collectionï¼Œè€Œä¸æ˜¯member + get :search + end end end ``` #### 2ã€è®¾ç½®controllerä¸»è¦è®¾ç½®é€šè¿‡å“ªäº›å…³é”®è¯è¿›è¡Œæœç´¢ã€‚```ruby app/controllers/posts_controller.rb class PostsController &lt; ApplicationController before_action :validate_search_key, only: [:search] def search if @query_string.present? @posts = search_params #æœç´¢postçš„å…³é”®è¯ end end protected # æ”¾åœ¨æœ€å def validate_search_key # gsub æ˜¯Rubyä¸­æ­£åˆ™è¡¨è¾¾å¼çš„æ–¹æ³•ï¼Œå®ƒä¼šåˆ‡æ¢æ‰€æœ‰åŒ¹é…åˆ°çš„éƒ¨åˆ† @query_string = params[:q].gsub(/\\\\|\\'|\\/|\\?/, \"\")if params[:q].present? end def search_params Post.ransack(&#123;:title_or_content_cont =&gt; @query_string&#125;).result(distinct: true) #titleä¸contentæ˜¯postçš„ä¸¤ä¸ªæ ä½ï¼Œè€Œæˆ‘ä»¬çš„å…³é”®è¯å‡ºè‡ªè¿™é‡Œ end end ç¬¬ä¸‰æ­©viewsçš„è®¾å®š 1ã€å¯¼èˆªæ çš„æ˜¾ç¤ºapp/views/common/_navbar.html.erb12345678910 &lt;div class=\"collapse navbar-collapse\" id=\"bs-example-navbar-collapse-1\"&gt; + &lt;ul class=\"nav navbar-nav\"&gt; + &lt;li&gt; + &lt;div class=\"form-group form-inline search-bar\"&gt; + &lt;%= render :partial =&gt; \"posts/search_bar\"%&gt; + &lt;/div&gt; + &lt;/li&gt; + &lt;/ul&gt; â€¦â€¦ ç•¥&lt;/div&gt; æ‰§è¡Œ$ touch app/views/posts/_search_bar.html.erb,å¹¶ç¼–è¾‘app/views/posts/_search_bar.html.erb1234567891011121314 &lt;div class=\"row\"&gt; &lt;div class=\"col-sm-9 col-lg-8 col-lg-offset-2\"&gt; &lt;%= form_tag search_posts_path, :class =&gt; \"posts-search-form\", :method =&gt; :get do %&gt; &lt;div class=\"input-group\"&gt; &lt;input type=\"text\" class=\"form-control search-bar-input\" name=\"q\" value=\"&lt;%= params[:q] %&gt;\" placeholder=\"å…³é”®è¯\"&gt; &lt;span class=\"input-group-btn\"&gt; &lt;button type=\"submit\" class=\"btn btn-default search-bar-submit\"&gt; &lt;span class=\"glyphicon glyphicon-search\"&gt;&lt;/span&gt; &lt;/button&gt; &lt;/span&gt; &lt;/div&gt; &lt;% end %&gt; &lt;/div&gt;&lt;/div&gt; 2.æœç´¢åé¦ˆé¡µé¢æ–°å¢ app/views/posts/search.html.erbapp/views/posts/search.html.erb123456789101112131415161718192021222324252627282930313233&lt;div class=\"minHeight1000 bg-gray\"&gt; &lt;div class=\"search-page w1200 pt30 bc\"&gt; &lt;% if @posts.present? %&gt; &lt;h5 class=\"collection search-count\"&gt;å·²ä¸ºæ‚¨æ‰¾åˆ°&lt;%= @posts.count %&gt;ç¯‡ç›¸å…³æ–‡ç« &lt;/h5&gt; &lt;% else %&gt; &lt;p class=\"tc mt100\"&gt;æœªæœç´¢åˆ°ä»»ä½•æ–‡ç« ï¼Œè¦ä¸æ¢ä¸ªå…³é”®è¯è¯•è¯•ï¼Ÿ&lt;/p&gt; &lt;% end %&gt; &lt;/div&gt; &lt;div class=\"container\"&gt; &lt;% @posts.each do |post| %&gt; &lt;div class=\"panel panel-default\"&gt; &lt;div class=\"panel-body\"&gt; &lt;%= post.title %&gt; &lt;br/&gt; &lt;br/&gt; &lt;span id=\"psot-thumbsup-&lt;%= post.id%&gt;\" class=\" label label-success\"&gt;&lt;%= post.likes.count%&gt;ğŸ‘&lt;/span&gt; &lt;div class=\"text-right\"&gt; &lt;% if !current_user.is_collect_of?(post) %&gt; &lt;%= link_to(\"æ”¶è—\", collect_post_path(post), method: :post, class: \"btn btn-sm\") %&gt; &lt;% else %&gt; &lt;%= link_to(\"å–æ¶ˆæ”¶è—\", uncollect_post_path(post), method: :post, class: \"btn btn-sm\") %&gt; &lt;% end %&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;% end %&gt; &lt;/div&gt;&lt;/div&gt; æ•ˆæœå›¾","categories":[{"name":"Ruby","slug":"Ruby","permalink":"http://yoursite.com/categories/Ruby/"}],"tags":[{"name":"Ruby","slug":"Ruby","permalink":"http://yoursite.com/tags/Ruby/"},{"name":"ransack","slug":"ransack","permalink":"http://yoursite.com/tags/ransack/"}]},{"title":"Hello World","slug":"hello-world","date":"2017-09-06T09:33:31.000Z","updated":"2017-09-06T09:33:31.000Z","comments":true,"path":"2017/09/06/hello-world/","link":"","permalink":"http://yoursite.com/2017/09/06/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]}]}